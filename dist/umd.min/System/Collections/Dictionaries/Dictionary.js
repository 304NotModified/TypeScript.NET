/*
 * @author electricessence / https://github.com/electricessence/
 * Original: http://linqjs.codeplex.com/
 * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md
 */
var __extends=this&&this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)};!function(t,e){if("object"==typeof module&&"object"==typeof module.exports){var r=e(require,exports);void 0!==r&&(module.exports=r)}else"function"==typeof define&&define.amd&&define(t,e)}(["require","exports","../../Compare","../../Types","../../Functions","./DictionaryBase","../Enumeration/EnumeratorBase"],function(t,e){function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function n(t){return null===t?"null":void 0===t?"undefined":typeof t.toString===i["default"].FUNCTION?t.toString():Object.prototype.toString.call(t)}var o=t("../../Compare"),i=t("../../Types"),u=t("../../Functions"),a=t("./DictionaryBase"),s=t("../Enumeration/EnumeratorBase"),l=function(){function t(t,e,r,n){this.key=t,this.value=e,this.prev=r,this.next=n}return t}(),p=function(){function t(t,e){this.first=t,this.last=e}return t.prototype.addLast=function(t){var e=this;null!=e.last?(e.last.next=t,t.prev=e.last,e.last=t):e.first=e.last=t},t.prototype.replace=function(t,e){var r=this;null!=t.prev?(t.prev.next=e,e.prev=t.prev):r.first=e,null!=t.next?(t.next.prev=e,e.next=t.next):r.last=e},t.prototype.remove=function(t){var e=this;null!=t.prev?t.prev.next=t.next:e.first=t.next,null!=t.next?t.next.prev=t.prev:e.last=t.prev},t.prototype.clear=function(){for(var t=this;t.last;)t.remove(t.last)},t.prototype.forEach=function(t){for(var e=this,r=e.first;r;)t(r),r=r.next},t}(),c=function(t){function e(e){void 0===e&&(e=u["default"].Identity),t.call(this),this.compareSelector=e,this._count=0,this._entries=new p,this._buckets={}}return __extends(e,t),e.prototype.setKV=function(t,e,i){var u,a=this,s=a._buckets,p=a._entries,c=a.compareSelector,f=c(t),v=n(f);if(r(s,v)){for(var y=o.areEqual,h=s[v],d=0;d<h.length;d++){var _=h[d];if(c(_.key)===f){if(!i)throw new Error("Key already exists.");var x=!y(_.value,e);return x&&(void 0===e?(p.remove(_),h.splice(d,1),h.length||delete s[v],--a._count):(u=new l(t,e),p.replace(_,u),h[d]=u),a._onValueUpdate(t,e,_.value)),x}}h.push(u=u||new l(t,e))}else{if(void 0===e){if(i)return!1;throw new Error("Cannot add 'undefined' value.")}s[v]=[u=new l(t,e)]}return++a._count,p.addLast(u),a._onValueUpdate(t,e,void 0),!0},e.prototype.addByKeyValue=function(t,e){this.setKV(t,e,!1)},e.prototype.getValue=function(t){var e=this._buckets,o=this.compareSelector,i=o(t),u=n(i);if(!r(e,u))return void 0;for(var a=e[u],s=0;s<a.length;s++){var l=a[s];if(o(l.key)===i)return l.value}return void 0},e.prototype.setValue=function(t,e){return this.setKV(t,e,!0)},e.prototype.containsKey=function(t){var e=this,o=e._buckets,i=e.compareSelector,u=i(t),a=n(u);if(!r(o,a))return!1;for(var s=o[a],l=0,p=s.length;p>l;l++)if(i(s[l].key)===u)return!0;return!1},e.prototype.clear=function(){var e=this,r=e._buckets,n=t.prototype.clear.call(this);e._count=0;for(var o in r)r.hasOwnProperty(o)&&delete r[o];return e._entries.clear(),n},e.prototype.getCount=function(){return this._count},e.prototype.getEnumerator=function(){var t,e=this;return new s["default"](function(){t=e._entries.first},function(e){if(null!=t){var r={key:t.key,value:t.value};return t=t.next,e.yieldReturn(r)}return e.yieldBreak()})},e.prototype.getKeys=function(){var t=this,e=[];return t._entries.forEach(function(t){return e.push(t.key)}),e},e.prototype.getValues=function(){var t=this,e=[];return t._entries.forEach(function(t){return e.push(t.value)}),e},e}(a["default"]);Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=c});
//# sourceMappingURL=Dictionary.js.map
