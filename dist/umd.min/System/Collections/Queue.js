/*
 * @author electricessence / https://github.com/electricessence/
 * Based Upon: http://referencesource.microsoft.com/#System/CompMod/system/collections/generic/queue.cs
 * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md
 */
!function(e,t){if("object"==typeof module&&"object"==typeof module.exports){var r=t(require,exports);void 0!==r&&(module.exports=r)}else"function"==typeof define&&define.amd&&define(e,t)}(["require","exports","../Compare","./Array/Utility","../Types","../Integer","./Enumeration/EnumeratorBase","./Enumeration/forEach","../Exceptions/NotImplementedException","../Exceptions/InvalidOperationException","../Exceptions/ArgumentOutOfRangeException"],function(e,t){function r(e,t){if(0>e)throw new _["default"](t,e,"Must be greater than zero")}function a(e,t){u["default"].assert(e,t),r(e,t)}var i=e("../Compare"),n=e("./Array/Utility"),o=e("../Types"),u=e("../Integer"),c=e("./Enumeration/EnumeratorBase"),p=e("./Enumeration/forEach"),y=e("../Exceptions/NotImplementedException"),s=e("../Exceptions/InvalidOperationException"),_=e("../Exceptions/ArgumentOutOfRangeException"),l=4,f=100,d=l,h=[],v=function(){function e(e){var t=this;if(t._head=0,t._tail=0,t._size=0,t._version=0,e)if(o["default"].isNumber(e)){var r=e;a(r,"capacity"),t._array=r?n.initialize(r):h}else{var i=e;t._array=n.initialize(i instanceof Array||"length"in i?i.length:d),p["default"](i,function(e){return t.enqueue(e)}),t._version=0}else t._array=h;t._capacity=t._array.length}return Object.defineProperty(e.prototype,"count",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReadOnly",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.add=function(e){this.enqueue(e)},e.prototype.clear=function(){var e=this,t=e._array,r=e._head,a=e._tail,i=e._size;return a>r?n.clear(t,r,i):(n.clear(t,r,t.length-r),n.clear(t,0,a)),e._head=0,e._tail=0,e._size=0,e._version++,i},e.prototype.contains=function(e){for(var t=this,r=t._array,a=t._head,n=t._size,o=t._capacity;n-->0;){if(i.areEqual(r[a],e))return!0;a=(a+1)%o}return!1},e.prototype.copyTo=function(e,t){if(void 0===t&&(t=0),null==e)throw new Error("ArgumentNullException: array cannot be null.");a(t,"arrayIndex");var r=this,i=r._size;if(i){var o=i,u=r._array,c=r._capacity,p=r._head,y=c-p,s=i>y?y:i;return n.copyTo(u,e,p,t,s),o-=s,o>0&&n.copyTo(u,e,0,t+c-p,o),e}},e.prototype.toArray=function(){var e=this,t=e._size,r=n.initialize(t);return t?e.copyTo(r):r},e.prototype.remove=function(e){throw new y["default"]("ICollection<T>.remove is not implemented in Queue<T> since it would require destroying the underlying array to remove the item.")},e.prototype.dispose=function(){var e=this;e.clear(),e._array!=h&&(e._array.length=e._capacity=0,e._array=h),e._version=0},e.prototype.forEach=function(e){for(var t=this,r=t.toArray(),a=t._size,i=0;a>i&&e(r[i],i)!==!1;i++);},e.prototype.setCapacity=function(e){a(e,"capacity");var t=this,r=t._array,i=t._capacity;if(e!=i){var o=t._head,u=t._tail,c=t._size;if(r!=h&&e>i&&u>o)return r.length=t._capacity=e,void t._version++;var p=n.initialize(e);c>0&&(u>o?n.copyTo(r,p,o,0,c):(n.copyTo(r,p,o,0,i-o),n.copyTo(r,p,0,i-o,u))),t._array=p,t._capacity=e,t._head=0,t._tail=c==e?0:c,t._version++}},e.prototype.enqueue=function(e){var t=this,r=t._array,a=t._size,i=t._capacity;if(a==i){var n=i*f;i+l>n&&(n=i+l),t.setCapacity(n),r=t._array,i=t._capacity}var o=t._tail;r[o]=e,t._tail=(o+1)%i,t._size=a+1,t._version++},e.prototype.dequeue=function(){var e=this;if(0==e._size)throw new s["default"]("Cannot dequeue an empty queue.");var t=e._array,r=e._head,a=e._array[r];return t[r]=null,e._head=(r+1)%e._capacity,e._size--,e._version++,a},e.prototype._getElement=function(e){a(e,"index");var t=this;return t._array[(t._head+e)%t._capacity]},e.prototype.peek=function(){if(0==this._size)throw new s["default"]("Cannot call peek on an empty queue.");return this._array[this._head]},e.prototype.trimExcess=function(){var e=this,t=e._size;t<Math.floor(.9*e._capacity)&&e.setCapacity(t)},e.prototype.getEnumerator=function(){var e,t,r=this;return new c["default"](function(){t=r._version,e=0},function(a){if(t!=r._version)throw new s["default"]("Collection was changed during enumeration.");return e==r._size?a.yieldBreak():a.yieldReturn(r._getElement(e++))})},e}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=v});
//# sourceMappingURL=Queue.js.map
