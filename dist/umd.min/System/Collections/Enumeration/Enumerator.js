/*!
 * @author electricessence / https://github.com/electricessence/
 * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md
 */
!function(e){if("object"==typeof module&&"object"==typeof module.exports){var r=e(require,exports);void 0!==r&&(module.exports=r)}else"function"==typeof define&&define.amd&&define(["require","exports","../../Disposable/dispose","../../Types","./ArrayEnumerator","./IndexEnumerator","./UnsupportedEnumerableException"],e)}(function(e,r){"use strict";function n(e){if(e)throw new d.UnsupportedEnumerableException(h)}function t(e){if(Array.isArray(e)||l.Type.isString(e)){var r=e.length;if(isFinite(r)){if(r>65535)return new Array(r);var n=[];return n.length=r,n}}return[]}function o(e){if(!e)return g;if(Array.isArray(e))return new y.ArrayEnumerator(e);if(l.Type.isArrayLike(e))return new m.IndexEnumerator(function(){return{source:e,length:e.length,pointer:0,step:1}});if(!l.Type.isPrimitive(e)&&i(e))return e.getEnumerator();throw new Error("Unknown enumerable.")}function i(e){return l.Type.hasMemberOfType(e,"getEnumerator",l.Type.FUNCTION)}function u(e){return l.Type.isArrayLike(e)||i(e)}function a(e){return l.Type.hasMemberOfType(e,"moveNext",l.Type.FUNCTION)}function p(e,r){if(e!==E&&null!==e){if(l.Type.isArrayLike(e)){n(!isFinite(e.length));for(var t=0;t<e.length&&r(e[t],t)!==!1;t++);return!0}if(a(e)){n(e.isEndless);for(var o=0;e.moveNext()&&r(e.current,o++)!==!1;);return!0}return i(e)?(n(e.isEndless),c.using(e.getEnumerator(),function(e){return p(e,r)}),!0):!1}}function f(e){if(e===b)return[];if(Array.isArray(e))return e.slice();var r=t(e);if(!p(e,function(e,n){r[n]=e}))throw new d.UnsupportedEnumerableException;return r}function s(e,r){var n=t(e);if(!p(e,function(e,t){n[t]=r(e)}))throw new d.UnsupportedEnumerableException;return n}var c=e("../../Disposable/dispose"),l=e("../../Types"),y=e("./ArrayEnumerator"),m=e("./IndexEnumerator"),d=e("./UnsupportedEnumerableException"),E=void 0,b="",h="Cannot call forEach on an endless enumerable. Would result in an infinite loop that could hang the current process.";r.throwIfEndless=n;var x=function(){function e(){}return Object.defineProperty(e.prototype,"current",{get:function(){return E},enumerable:!0,configurable:!0}),e.prototype.moveNext=function(){return!1},e.prototype.nextValue=function(){return E},e.prototype.next=function(){return{value:E,done:!0}},e.prototype.reset=function(){},e.prototype.dispose=function(){},Object.defineProperty(e.prototype,"isEndless",{get:function(){return!1},enumerable:!0,configurable:!0}),e}(),g=new x;Object.freeze(g),r.empty=g,r.from=o,r.isEnumerable=i,r.isEnumerableOrArrayLike=u,r.isEnumerator=a,r.forEach=p,r.toArray=f,r.map=s});
//# sourceMappingURL=Enumerator.js.map
