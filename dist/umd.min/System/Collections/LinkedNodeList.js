/*!
 * @author electricessence / https://github.com/electricessence/
 * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md
 */
!function(t){if("object"==typeof module&&"object"==typeof module.exports){var e=t(require,exports);void 0!==e&&(module.exports=e)}else"function"==typeof define&&define.amd&&define(["require","exports","../Text/Utility","../Exceptions/InvalidOperationException","../Exceptions/ArgumentException","../Exceptions/ArgumentNullException","./Enumeration/EnumeratorBase"],t)}(function(t,e){"use strict";function n(t,e){if(void 0===e&&(e="node"),null==t)throw new u["default"](e);if(t.next||t.previous)throw new o["default"]("Cannot add a node to a LinkedNodeList that is already linked.")}var r=t("../Text/Utility"),o=t("../Exceptions/InvalidOperationException"),i=t("../Exceptions/ArgumentException"),u=t("../Exceptions/ArgumentNullException"),s=t("./Enumeration/EnumeratorBase"),f=function(){function t(){this._first=null,this._last=null,this.unsafeCount=0}return Object.defineProperty(t.prototype,"first",{get:function(){return this._first},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){return this._last},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){for(var t=this._first,e=0;t;)e++,t=t.next;return e},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){var e=null,n=this.first,r=0;do e=n,n=e&&e.next;while(e&&t(e,r++)!==!1)},t.prototype.map=function(t){if(!t)throw new u["default"]("selector");var e=[];return this.forEach(function(n){e.push(t(n))}),e},t.prototype.clear=function(){var t,e=this,n=0,r=0;for(t=e._first,e._first=null;t;){n++;var o=t;t=t.next,o.next=null}for(t=e._last,e._last=null;t;){r++;var o=t;t=t.previous,o.previous=null}return n!==r&&console.warn("LinkedNodeList: Forward versus reverse count does not match when clearing. Forward: "+n+", Reverse: "+r),e.unsafeCount=0,n},t.prototype.dispose=function(){this.clear()},t.prototype.contains=function(t){return-1!=this.indexOf(t)},t.prototype.getNodeAt=function(t){if(0>t)return null;for(var e=this._first,n=0;e&&t<n++;)e=e.next;return e},t.prototype.find=function(t){var e=null;return this.forEach(function(n,r){return t(n,r)?(e=n,!1):void 0}),e},t.prototype.indexOf=function(t){if(t&&(t.previous||t.next)){var e,n=0,r=this._first;do{if(e=r,e===t)return n;n++}while(r=e&&e.next)}return-1},t.prototype.removeFirst=function(){return this.removeNode(this._first)},t.prototype.removeLast=function(){return this.removeNode(this._last)},t.prototype.removeNode=function(t){if(null==t)throw new u["default"]("node");var e=this,n=t.previous,o=t.next,s=!1,f=!1;if(n?n.next=o:e._first==t?e._first=o:s=!0,o?o.previous=n:e._last==t?e._last=n:f=!0,s!==f)throw new i["default"]("node",r.format("Provided node is has no {0} reference but is not the {1} node!",s?"previous":"next",s?"first":"last"));var a=!s&&!f;return a&&e.unsafeCount--,a},t.prototype.addNode=function(t){this.addNodeAfter(t)},t.prototype.addNodeBefore=function(t,e){n(t);var r=this;if(e||(e=r._first),e){var o=e.previous;t.previous=o,t.next=e,e.previous=t,o&&(o.next=t),e==r._first&&(r._last=t)}else r._first=r._last=t;r.unsafeCount++},t.prototype.addNodeAfter=function(t,e){n(t);var r=this;if(e||(e=r._last),e){var o=e.next;t.next=o,t.previous=e,e.next=t,o&&(o.previous=t),e==r._last&&(r._last=t)}else r._first=r._last=t;r.unsafeCount++},t.prototype.replace=function(t,e){if(null==t)throw new u["default"]("node");n(e,"replacement");var r=this;e.previous=t.previous,e.next=t.next,t.previous&&(t.previous.next=e),t.next&&(t.next.previous=e),t==r._first&&(r._first=e),t==r._last&&(r._last=e)},t.valueEnumeratorFrom=function(t){if(!t)throw new u["default"]("list");var e,n;return new s["default"](function(){e=null,n=t.first},function(t){return n?(e=n,n=e&&e.next,t.yieldReturn(e.value)):t.yieldBreak()})},t.copyValues=function(t,e,n){if(void 0===n&&(n=0),t&&t.first){if(!e)throw new u["default"]("array");t.forEach(function(t,r){e[n+r]=t.value})}return e},t}();Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=f});
//# sourceMappingURL=LinkedNodeList.js.map
