/*!
 * @author electricessence / https://github.com/electricessence/
 * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md
 */
define(["require","exports","../../Disposable/dispose","../../Types","./ArrayEnumerator","./IndexEnumerator","./UnsupportedEnumerableException"],function(e,r,n,t,i,o,u){"use strict";function a(e){if(e)throw new u.UnsupportedEnumerableException(h)}function f(e){if(Array.isArray(e)||t.Type.isString(e)){var r=e.length;if(isFinite(r)){if(r>65535)return new Array(r);var n=[];return n.length=r,n}}return[]}function p(e){if(!e)return v;if(Array.isArray(e))return new i.ArrayEnumerator(e);if(t.Type.isArrayLike(e))return new o.IndexEnumerator(function(){return{source:e,length:e.length,pointer:0,step:1}});if(!t.Type.isPrimitive(e)&&s(e))return e.getEnumerator();throw new Error("Unknown enumerable.")}function s(e){return t.Type.hasMemberOfType(e,"getEnumerator",t.Type.FUNCTION)}function c(e){return t.Type.isArrayLike(e)||s(e)}function y(e){return t.Type.hasMemberOfType(e,"moveNext",t.Type.FUNCTION)}function l(e,r){if(e!==d&&null!==e){if(t.Type.isArrayLike(e)){a(!isFinite(e.length));for(var i=0;i<e.length&&r(e[i],i)!==!1;i++);return!0}if(y(e)){a(e.isEndless);for(var o=0;e.moveNext()&&r(e.current,o++)!==!1;);return!0}return s(e)?(a(e.isEndless),n.using(e.getEnumerator(),function(e){return l(e,r)}),!0):!1}}function m(e){if(e===b)return[];if(Array.isArray(e))return e.slice();var r=f(e);if(!l(e,function(e,n){r[n]=e}))throw new u.UnsupportedEnumerableException;return r}function E(e,r){var n=f(e);if(!l(e,function(e,t){n[t]=r(e)}))throw new u.UnsupportedEnumerableException;return n}var d=void 0,b="",h="Cannot call forEach on an endless enumerable. Would result in an infinite loop that could hang the current process.";r.throwIfEndless=a;var g=function(){function e(){}return Object.defineProperty(e.prototype,"current",{get:function(){return d},enumerable:!0,configurable:!0}),e.prototype.moveNext=function(){return!1},e.prototype.nextValue=function(){return d},e.prototype.next=function(){return{value:d,done:!0}},e.prototype.reset=function(){},e.prototype.dispose=function(){},Object.defineProperty(e.prototype,"isEndless",{get:function(){return!1},enumerable:!0,configurable:!0}),e}(),v=new g;Object.freeze(v),r.empty=v,r.from=p,r.isEnumerable=s,r.isEnumerableOrArrayLike=c,r.isEnumerator=y,r.forEach=l,r.toArray=m,r.map=E});
//# sourceMappingURL=Enumerator.js.map
