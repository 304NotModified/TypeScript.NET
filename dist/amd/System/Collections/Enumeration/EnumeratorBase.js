/*!
 * @author electricessence / https://github.com/electricessence/
 * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md
 */
var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};define(["require","exports","../../Types","../../Disposable/DisposableBase","../../Disposable/ObjectPool"],function(e,t,r,n,i){"use strict";function o(e){return s||(s=new i["default"](40,function(){return new a})),e?(e.yieldBreak(),void s.add(e)):s.take()}var s,u,l=void 0,a=function(){function e(){this._current=l}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),e.prototype.yieldReturn=function(e){return this._current=e,!0},e.prototype.yieldBreak=function(){return this._current=l,!1},e.prototype.dispose=function(){this.yieldBreak()},e}();!function(e){e[e.Before=0]="Before",e[e.Running=1]="Running",e[e.After=2]="After"}(u||(u={}));var c=function(e){function t(t,n,i,o){e.call(this),this._initializer=t,this._tryGetNext=n,this.reset(),r["default"].isBoolean(o)?this._isEndless=o:r["default"].isBoolean(i)&&(this._isEndless=i),r["default"].isFunction(i)&&(this._disposer=i)}return __extends(t,e),Object.defineProperty(t.prototype,"current",{get:function(){return this._yielder.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEndless",{get:function(){return this._isEndless},enumerable:!0,configurable:!0}),t.prototype.reset=function(){var e=this;e.throwIfDisposed();var t=e._yielder;t?t.yieldBreak():e._yielder=o(),e._state=u.Before},t.prototype.moveNext=function(){var e=this;try{switch(e._state){case u.Before:e._state=u.Running;var t=e._initializer;t&&t();case u.Running:return e._tryGetNext(e._yielder)?!0:(this.dispose(),!1);case u.After:return!1}}catch(r){throw this.dispose(),r}},t.prototype.nextValue=function(){return this.moveNext()?this._yielder.current:l},t.prototype.next=function(){return this.moveNext()?{value:this._yielder.current,done:!1}:{value:l,done:!0}},t.prototype._onDispose=function(){var e=this,t=e._disposer;e._initializer=null,e._disposer=null;var r=e._yielder;e._yielder=null,o(r);try{t&&t()}finally{this._state=u.After}},t}(n["default"]);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=c});
//# sourceMappingURL=EnumeratorBase.js.map
