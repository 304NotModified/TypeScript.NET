!function(){var t,n=this.__extends||function(t,n){function e(){this.constructor=t}for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r]);e.prototype=n.prototype,t.prototype=new e};!function(t){var e;!function(e){"use strict";function r(n){return t.DisposableBase.assertIsNotDisposed(n,"Enumerable was disposed.")}function o(t){return isNaN(t)?0/0:t}function i(t,n){if(typeof t===v.Number&&!isNaN(t)&&t!=(0|t))throw new Error("'"+n+"' must be an integer.");return!0}var u=t.Collections.ArrayUtility,s=t.Collections.EnumeratorBase,c=t.Collections.Dictionary,a=t.Collections.Queue,f=t.using,p=t.Collections.Enumerator.from,l=t.Collections.Enumerator.forEach,v=t.Types,d=function(t){function e(){t.apply(this,arguments)}return n(e,t),e.prototype.Greater=function(t,n){return t>n?t:n},e.prototype.Lesser=function(t,n){return n>t?t:n},e}(t.Functions),y=new d,h=0,m=-1,w=1;!function(t){t[t.Break=0]="Break",t[t.Return=1]="Return",t[t.Skip=2]="Skip"}(e.EnumerableAction||(e.EnumerableAction={}));var g=e.EnumerableAction;Object.freeze(g);var E=function(e){function d(t,n){e.call(this,n),this.enumeratorFactory=t}return n(d,e),d.fromArray=function(t){return new N(t)},d.from=function(n){if("getEnumerator"in n)return n;if(n instanceof Array||typeof n===t.Types.Object&&"length"in n)return d.fromArray(n);throw new Error("Unsupported enumerable.")},d.toArray=function(n){if(n instanceof Array)return n.slice();if(typeof n===t.Types.Object&&"length"in n&&(n=d.fromArray(n)),n instanceof d)return n.toArray();if("getEnumerator"in n){var e=[];return l(n.getEnumerator(),function(t,n){e[n]=t}),e}throw new Error("Unsupported enumerable.")},d.prototype.getEnumerator=function(){return this.assertIsNotDisposed(),this.enumeratorFactory()},d.prototype._onDispose=function(){e.prototype._onDispose.call(this),this.enumeratorFactory=null},d.choice=function(t){return new d(function(){return new s(null,function(n){return n.yieldReturn(t[Math.random()*t.length|0])})})},d.cycle=function(t){return new d(function(){var n=h;return new s(function(){n=h},function(e){return n>=t.length&&(n=h),e.yieldReturn(t[n++])})})},d.empty=function(){return new d(function(){return new s(null,y.False)})},d.repeat=function(t,n){return void 0===n&&(n=1/0),isNaN(n)||0>=n?d.empty():new d(isFinite(n)&&i(n,"count")?function(){var e=0|n,r=h;return new s(function(){r=h},function(n){return r++<e&&n.yieldReturn(t)})}:function(){return new s(null,function(n){return n.yieldReturn(t)})})},d.repeatWithFinalize=function(t,n){return new d(function(){var e;return new s(function(){e=t()},function(t){return t.yieldReturn(e)},function(){n(e)})})},d.make=function(t){return d.repeat(t,w)},d.range=function(t,n,e){if(void 0===t&&(t=0),void 0===n&&(n=1/0),void 0===e&&(e=1),!isFinite(t))throw new Error("Must have a valid 'start' value.");if(isNaN(n)||0>=n)return d.empty();if(!isFinite(e))throw new Error("Must have a valid 'step' value.");return new d(isFinite(n)&&i(n,"count")?function(){var r,o=0|n,i=h;return new s(function(){i=h,r=t},function(t){var u=i++<o&&t.yieldReturn(r);return u&&n>i&&(r+=e),u})}:function(){var n;return new s(function(){n=t},function(t){var r=n;return n+=e,t.yieldReturn(r)})})},d.rangeDown=function(t,n,e){return void 0===t&&(t=0),void 0===n&&(n=1/0),void 0===e&&(e=1),e=-1*Math.abs(e),d.range(t,n,e)},d.toInfinity=function(t,n){return void 0===t&&(t=0),void 0===n&&(n=1),d.range(t,1/0,n)},d.toNegativeInfinity=function(t,n){return void 0===t&&(t=0),void 0===n&&(n=1),d.rangeDown(t,1/0,n)},d.rangeTo=function(t,n,e){if(void 0===t&&(t=0),void 0===n&&(n=1/0),void 0===e&&(e=1),!isFinite(t))throw new Error("Must have a valid 'start' value.");if(isNaN(n))throw new Error("Must have a valid 'to' value.");if(!isFinite(e))throw new Error("Must have a valid 'step' value.");return e=Math.abs(e),isFinite(n)?new d(function(){var r;return n>t?new s(function(){r=t},function(t){var o=n>=r&&t.yieldReturn(r);return o&&(r+=e),o}):new s(function(){r=t},function(t){var o=r>=n&&t.yieldReturn(r);return o&&(r-=e),o})}):d.range(t,1/0,n>t?+e:-e)},d.matches=function(t,n,e){void 0===e&&(e="");var r=typeof t;if(r!=v.String)throw new Error("Cannot exec RegExp matches of type '"+r+"'.");return n instanceof RegExp&&(e+=n.ignoreCase?"i":"",e+=n.multiline?"m":"",n=n.source),-1===e.indexOf("g")&&(e+="g"),new d(function(){var r;return new s(function(){r=new RegExp(n,e)},function(n){var e=r.exec(t);return null!==e?n.yieldReturn(e):!1})})},d.generate=function(t,n){return void 0===n&&(n=1/0),isNaN(n)||0>=n?d.empty():new d(isFinite(n)&&i(n,"count")?function(){var e=0|n,r=h;return new s(function(){r=h},function(n){var o=r++;return e>o&&n.yieldReturn(t(o))})}:function(){var n=h;return new s(function(){n=h},function(e){return e.yieldReturn(t(n++))})})},d.unfold=function(t,n,e){return void 0===e&&(e=!1),new d(function(){var r,o,i=h;return new s(function(){i=h,r=t,o=!e},function(t){var e=i++;return o?o=!1:r=n(r,e),t.yieldReturn(r)})})},d.defer=function(n){return new d(function(){var e;return new s(function(){e=n().getEnumerator()},function(t){return e.moveNext()&&t.yieldReturn(e.current)},function(){t.dispose(e)})})},d.forEach=function(n,e){t.Collections.Enumerable.forEach(n,e)},d.max=function(t){return t.takeUntil(function(t){return t==+1/0},!0).aggregate(y.Greater)},d.min=function(t){return t.takeUntil(function(t){return t==-1/0},!0).aggregate(y.Lesser)},d.prototype.assertIsNotDisposed=function(t){return void 0===t&&(t="Enumerable was disposed."),e.prototype.assertIsNotDisposed.call(this,t)},d.prototype.forEach=function(t){var n=this;n.assertIsNotDisposed();var e=h;f(n.getEnumerator(),function(r){for(;n.assertIsNotDisposed()&&r.moveNext()&&t(r.current,e++)!==!1;);})},d.prototype.toArray=function(t){var n=[];return t?this.where(t).toArray():(this.forEach(function(t,e){n[e]=t}),n)},d.prototype.asEnumerable=function(){var t=this;return new d(function(){return t.getEnumerator()})},d.prototype.toLookup=function(t,n,e){void 0===n&&(n=y.Identity),void 0===e&&(e=y.Identity);var r=new c(e);return this.forEach(function(e){var o=t(e),i=n(e),u=r.get(o);void 0!==u?u.push(i):r.addByKeyValue(o,[i])}),new k(r)},d.prototype.toMap=function(t,n){var e={};return this.forEach(function(r){e[t(r)]=n(r)}),e},d.prototype.toDictionary=function(t,n,e){void 0===e&&(e=y.Identity);var r=new c(e);return this.forEach(function(e){return r.addByKeyValue(t(e),n(e))}),r},d.prototype.toJoinedString=function(t,n){return void 0===t&&(t=""),void 0===n&&(n=y.Identity),this.select(n).toArray().join(t)},d.prototype.doAction=function(n){var e=this,o=!e.assertIsNotDisposed();return new d(function(){var i,u=h;return new s(function(){r(o),u=h,i=e.getEnumerator()},function(t){for(r(o);i.moveNext();){var e=n(i.current,u++);if(e===!1||e===g)return t.yieldBreak();if(2!==e)return t.yieldReturn(i.current)}return!1},function(){t.dispose(i)})},function(){o=!0})},d.prototype.force=function(t){void 0===t&&(t=0),this.assertIsNotDisposed(),this.doAction(function(){return t})},d.prototype.skip=function(t){var n=this;if(n.assertIsNotDisposed(),!t||isNaN(t)||0>t)return n;if(!isFinite(t))return d.empty();i(t,"count");var e=0|t;return this.doAction(function(t,n){return e>n?2:1})},d.prototype.skipWhile=function(t){this.assertIsNotDisposed();var n=!0;return this.doAction(function(e,r){return n&&(n=t(e,r)),n?2:1})},d.prototype.take=function(t){if(!t||isNaN(t)||0>t)return d.empty();var n=this;if(n.assertIsNotDisposed(),!isFinite(t))return n;i(t,"count");var e=0|t;return n.doAction(function(t,n){return e>n})},d.prototype.takeWhile=function(t){return this.assertIsNotDisposed(),this.doAction(function(n,e){return t(n,e)?1:0})},d.prototype.takeUntil=function(t,n){if(this.assertIsNotDisposed(),!n)return this.doAction(function(n,e){return t(n,e)?0:1});var e=!1;return this.doAction(function(n,r){return e?0:(e=t(n,r),1)})},d.prototype.takeExceptLast=function(n){void 0===n&&(n=1);var e=this;if(!n||isNaN(n)||0>=n)return e;if(!isFinite(n))return d.empty();i(n,"count");var r=0|n;return new d(function(){var n,o;return new s(function(){n=e.getEnumerator(),o=new a},function(t){for(;n.moveNext();)if(o.enqueue(n.current),o.count>r)return t.yieldReturn(o.dequeue());return!1},function(){t.dispose(n,o)})})},d.prototype.takeFromLast=function(t){if(!t||isNaN(t)||0>=t)return d.empty();var n=this;return isFinite(t)?(i(t,"count"),n.reverse().take(0|t)):n.reverse()},d.prototype.traverseBreadthFirst=function(n,e){var r=this;return new d(function(){var o,i,u,c=h;return new s(function(){c=h,i=[],u=0,o=r.getEnumerator()},function(t){for(;;){if(o.moveNext())return i[u++]=o.current,t.yieldReturn(e(o.current,c));if(!u)return t.yieldBreak();var r=d.fromArray(i).selectMany(n);if(!r.any())return t.yieldBreak();c++,i=[],u=0,o.dispose(),o=r.getEnumerator()}},function(){t.dispose(o),i.length=0})})},d.prototype.traverseDepthFirst=function(n,e){var r=this;return new d(function(){var o,i,u=[];return new s(function(){o=r.getEnumerator(),i=0},function(t){for(;;){if(o.moveNext()){var r=e(o.current,i);return u[i++]=o,o=n(o.current).getEnumerator(),t.yieldReturn(r)}if(0==i)return!1;o.dispose(),o=u[--i],u.length=i}},function(){try{t.dispose(o)}finally{t.disposeThese(u)}})})},d.prototype.flatten=function(){var n=this;return new d(function(){var e,r=null;return new s(function(){e=n.getEnumerator()},function(t){for(;;){if(null!=r){if(r.moveNext())return t.yieldReturn(r.current);r=null}if(e.moveNext()){var n=e.current;if(n instanceof Array){r.dispose(),r=d.fromArray(n).selectMany(y.Identity).flatten().getEnumerator();continue}return t.yieldReturn(e.current)}return!1}},function(){t.dispose(e,r)})})},d.prototype.pairwise=function(n){var e=this;return new d(function(){var r;return new s(function(){r=e.getEnumerator(),r.moveNext()},function(t){var e=r.current;return r.moveNext()&&t.yieldReturn(n(e,r.current))},function(){t.dispose(r)})})},d.prototype.scan=function(n,e){var r=void 0!==e,o=this;return new d(function(){var i,u,c;return new s(function(){i=o.getEnumerator(),c=!0},function(t){return c?(c=!1,r?t.yieldReturn(u=e):i.moveNext()&&t.yieldReturn(u=i.current)):i.moveNext()?t.yieldReturn(u=n(u,i.current)):!1},function(){t.dispose(i)})})},d.prototype.select=function(n){var e=this,o=!e.assertIsNotDisposed();return n.length<2?new D(e,null,n):new d(function(){var i,u=h;return new s(function(){r(o),u=h,i=e.getEnumerator()},function(t){return r(o),i.moveNext()?t.yieldReturn(n(i.current,u++)):!1},function(){t.dispose(i)})},function(){o=!0})},d.prototype.selectMany=function(n,e){var r=this;return e||(e=function(t,n){return n}),new d(function(){var o,i,u=h;return new s(function(){o=r.getEnumerator(),i=void 0,u=h},function(r){if(void 0===i&&!o.moveNext())return!1;do{if(!i){var s=n(o.current,u++);if(!s)continue;i=t.Collections.Enumerator.from(s)}if(i.moveNext())return r.yieldReturn(e(o.current,i.current));i.dispose(),i=null}while(o.moveNext());return!1},function(){t.dispose(o,i),o=null,i=null})})},d.prototype.choose=function(n){var e=this,o=!e.assertIsNotDisposed();return new d(function(){var i,u=h;return new s(function(){r(o),u=h,i=e.getEnumerator()},function(t){for(r(o);i.moveNext();){var e=n(i.current,u++);if(null!==e&&void 0!==e)return t.yieldReturn(e)}return!1},function(){t.dispose(i)})},function(){o=!0})},d.prototype.where=function(n){var e=this,o=!e.assertIsNotDisposed();return n.length<2?new x(e,n):new d(function(){var i,u=h;return new s(function(){r(o),u=h,i=e.getEnumerator()},function(t){for(r(o);i.moveNext();)if(n(i.current,u++))return t.yieldReturn(i.current);return!1},function(){t.dispose(i)})},function(){o=!0})},d.prototype.ofType=function(t){var n;switch(t){case Number:n=v.Number;break;case String:n=v.String;break;case Boolean:n=v.Boolean;break;case Function:n=v.Function;break;default:n=null}return this.where(null===n?function(n){return n instanceof t}:function(t){return typeof t===n})},d.prototype.except=function(n,e){var o=this,i=!o.assertIsNotDisposed();return new d(function(){var u,c;return new s(function(){r(i),u=o.getEnumerator(),c=new t.Collections.Dictionary(e),n&&d.forEach(n,function(t){return c.addByKeyValue(t,!0)})},function(t){for(r(i);u.moveNext();){var n=u.current;if(!c.containsKey(n))return c.addByKeyValue(n,!0),t.yieldReturn(n)}return!1},function(){t.dispose(u),c.clear()})},function(){i=!0})},d.prototype.distinct=function(t){return this.except(null,t)},d.prototype.distinctUntilChanged=function(n){var e=this,o=!e.assertIsNotDisposed();return new d(function(){var i,u,c=!0;return new s(function(){r(o),i=e.getEnumerator()},function(t){for(r(o);i.moveNext();){var e=n(i.current);if(c)c=!1;else if(u===e)continue;return u=e,t.yieldReturn(i.current)}return!1},function(){t.dispose(i)})},function(){o=!0})},d.prototype.reverse=function(){var t=this,n=!t.assertIsNotDisposed();return new d(function(){var e,o=h;return new s(function(){r(n),e=t.toArray(),o=0|e.length},function(t){return o>h&&t.yieldReturn(e[--o])},function(){e.length=0})},function(){n=!0})},d.prototype.shuffle=function(){var t=this,n=!t.assertIsNotDisposed();return new d(function(){var e,o,i;return new s(function(){r(n),e=t.toArray(),o=i=e.length},function(t){if(!i)return t.yieldBreak();var n=Math.random()*i|0,r=e[n],o=e[--i];return e[n]=o,e[i]=null,i%32==0&&(e.length=i),t.yieldReturn(r)},function(){e.length=0})},function(){n=!0})},d.prototype.count=function(t){var n=this;n.assertIsNotDisposed();var e=h;return n.forEach(t?function(n,r){t(n,r)&&++e}:function(){++e}),e},d.prototype.all=function(t){var n=!0;return this.forEach(function(e){return t(e)?void 0:(n=!1,!1)}),n},d.prototype.every=function(t){return this.all(t)},d.prototype.any=function(t){var n=!1;return this.forEach(t?function(e){return n=t(e),!n}:function(){return n=!0,!1}),n},d.prototype.some=function(t){return this.any(t)},d.prototype.isEmpty=function(){return!this.any()},d.prototype.contains=function(t,n){return this.any(n?function(e){return n(e)===n(t)}:function(n){return n===t})},d.prototype.indexOf=function(n,e){var r=m;return this.forEach(e?function(o,i){return t.areEqual(e(o),e(n),!0)?(r=i,!1):void 0}:function(e,o){return t.areEqual(e,n,!0)?(r=o,!1):void 0}),r},d.prototype.lastIndexOf=function(n,e){var r=m;return this.forEach(e?function(o,i){t.areEqual(e(o),e(n),!0)&&(r=i)}:function(e,o){t.areEqual(e,n,!0)&&(r=o)}),r},d.prototype.defaultIfEmpty=function(n){void 0===n&&(n=null);var e=this,o=!e.assertIsNotDisposed();return new d(function(){var i,u;return new s(function(){u=!0,r(o),i=e.getEnumerator()},function(t){return r(o),i.moveNext()?(u=!1,t.yieldReturn(i.current)):u?(u=!1,t.yieldReturn(n)):!1},function(){t.dispose(i)})})},d.prototype.zip=function(n,e){var r=this;return new d(function(){var o,i,u=h;return new s(function(){u=h,o=r.getEnumerator(),i=p(n)},function(t){return o.moveNext()&&i.moveNext()&&t.yieldReturn(e(o.current,i.current,u++))},function(){t.dispose(o,i)})})},d.prototype.zipMultiple=function(n,e){var r=this;return n.length?new d(function(){var o,i,u,c=h;return new s(function(){o=new a(n),c=h,i=r.getEnumerator(),u=null},function(t){if(i.moveNext())for(;;){for(;!u;){var n;if(!o.count)return t.yieldBreak();var n=o.dequeue();n&&(u=p(n))}if(u.moveNext())return t.yieldReturn(e(i.current,u.current,c++));u.dispose(),u=null}return t.yieldBreak()},function(){t.dispose(i,o)})}):d.empty()},d.prototype.join=function(n,e,r,o,i){void 0===i&&(i=y.Identity);var u=this;return new d(function(){var c,a,f=null,p=h;return new s(function(){c=u.getEnumerator(),a=d.from(n).toLookup(r,y.Identity,i)},function(t){for(;;){if(null!=f){var n=f[p++];if(void 0!==n)return t.yieldReturn(o(c.current,n));n=null,p=h}if(!c.moveNext())return t.yieldBreak();var r=e(c.current);f=a.get(r)}},function(){t.dispose(c)})})},d.prototype.groupJoin=function(n,e,r,o,i){void 0===i&&(i=y.Identity);var u=this;return new d(function(){var c,a=null;return new s(function(){c=u.getEnumerator(),a=d.from(n).toLookup(r,y.Identity,i)},function(t){return c.moveNext()&&t.yieldReturn(o(c.current,a.get(e(c.current))))},function(){t.dispose(c)})})},d.prototype.concatWith=function(n){var e=this;return new d(function(){var r,o;return new s(function(){r=e.getEnumerator()},function(t){if(null!=r){if(r.moveNext())return t.yieldReturn(r.current);o=p(n),r.dispose(),r=null}return o.moveNext()?t.yieldReturn(o.current):!1},function(){t.dispose(r,o)})})},d.prototype.merge=function(n){var e=this;return n.length?1==n.length?e.concatWith(n[0]):new d(function(){var r,o;return new s(function(){r=e.getEnumerator(),o=new a(n)},function(t){for(;;){for(;!r&&o.count;)r=p(o.dequeue());if(r&&r.moveNext())return t.yieldReturn(r.current);{if(!r)return t.yieldBreak();r.dispose(),r=null}}},function(){t.dispose(r,o)})}):e},d.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];var e=this;return 0==t.length?e:1==t.length?e.concatWith(t[0]):e.merge(t)},d.prototype.insertAt=function(n,e){if(isNaN(n)||0>n||!isFinite(n))throw new Error("'index' is invalid or out of bounds.");i(n,"index");var r=0|n,o=this;return o.assertIsNotDisposed(),new d(function(){var n,i,u=h,c=!1;return new s(function(){u=h,n=o.getEnumerator(),i=p(e),c=!1},function(t){return u==r&&(c=!0,i.moveNext())?t.yieldReturn(i.current):n.moveNext()?(u++,t.yieldReturn(n.current)):!c&&i.moveNext()&&t.yieldReturn(i.current)},function(){t.dispose(n,i)})})},d.prototype.alternateMultiple=function(n){var e=this;return new d(function(){var r,o,i,u;return new s(function(){u=new t.Collections.ArrayEnumerator(d.toArray(n)),i=e.getEnumerator();var s=i.moveNext();o=s?1:0,s&&(r=i.current)},function(t){switch(o){case 0:return t.yieldBreak();case 2:if(u.moveNext())return t.yieldReturn(u.current);u.reset(),o=1}var n=r,e=i.moveNext();return o=e?2:0,e&&(r=i.current),t.yieldReturn(n)},function(){t.dispose(i,u)})})},d.prototype.alternateSingle=function(t){return this.alternateMultiple(d.make(t))},d.prototype.alternate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];return this.alternateMultiple(t)},d.prototype.intersect=function(n,e){var r=this;return new d(function(){var o,i,u;return new s(function(){o=r.getEnumerator(),i=new c(e),u=new c(e),d.from(n).forEach(function(t){i.addByKeyValue(t,!0)})},function(t){for(;o.moveNext();){var n=o.current;if(!u.containsKey(n)&&i.containsKey(n))return u.addByKeyValue(n,!0),t.yieldReturn(n)}return t.yieldBreak()},function(){t.dispose(o)})})},d.prototype.sequenceEqual=function(n,e){return void 0===e&&(e=t.areEqual),f(this.getEnumerator(),function(t){return f(d.from(n).getEnumerator(),function(n){for(;t.moveNext();)if(!n.moveNext()||!e(t.current,n.current))return!1;return!n.moveNext()})})},d.prototype.union=function(n,e){void 0===e&&(e=y.Identity);var r=this;return new d(function(){var o,i,u;return new s(function(){o=r.getEnumerator(),u=new c(e)},function(t){var e;if(void 0===i){for(;o.moveNext();)if(e=o.current,!u.containsKey(e))return u.addByKeyValue(e,null),t.yieldReturn(e);i=d.from(n).getEnumerator()}for(;i.moveNext();)if(e=i.current,!u.containsKey(e))return u.addByKeyValue(e,null),t.yieldReturn(e);return!1},function(){t.dispose(o,i)})})},d.prototype.orderBy=function(t){return void 0===t&&(t=y.Identity),new I(this,t,!1)},d.prototype.orderByDescending=function(t){return void 0===t&&(t=y.Identity),new I(this,t,!0)},d.prototype.groupBy=function(t,n,e){void 0===n&&(n=y.Identity);var r=this;return new d(function(){return r.toLookup(t,n,e).getEnumerator()})},d.prototype.partitionBy=function(n,e,r,o){void 0===e&&(e=y.Identity),void 0===r&&(r=function(t,n){return new b(t,n)}),void 0===o&&(o=y.Identity);var i=this;return new d(function(){var u,c,a,f,p;return new s(function(){u=i.getEnumerator(),u.moveNext()?(c=n(u.current),a=o(c),f=[e(u.current)],p=1):f=null},function(t){if(!f)return t.yieldBreak();for(var i,s;(i=u.moveNext())&&(s=u.current,a===o(n(s)));)f[p++]=e(s);var l=r(c,f);return i?(s=u.current,c=n(s),a=o(c),f=[e(s)],p=1):f=null,t.yieldReturn(l)},function(){t.dispose(u),f=null})})},d.prototype.buffer=function(n){if(1>n||!isFinite(n))throw new Error("Invalid buffer size.");i(n,"size");var e,r=this;return new d(function(){var o;return new s(function(){o=r.getEnumerator()},function(t){var r=u.initialize(n);for(e=0;n>e&&o.moveNext;)r[e++]=o.current;return r.length=e,e&&t.yieldReturn(r)},function(){t.dispose(o)})})},d.prototype.aggregate=function(t,n){return this.scan(t,n).lastOrDefault()},d.prototype.average=function(t){void 0===t&&(t=o);var n=0,e=0,r=0;return this.forEach(function(o){var i=t(o);return isNaN(i)?(n=0/0,!1):(isFinite(i)?n+=i:e+=i>0?1:-1,void++r)}),e?1/0*e:isNaN(n)||!r?0/0:n/r},d.prototype.max=function(){return this.aggregate(y.Greater)},d.prototype.min=function(){return this.aggregate(y.Lesser)},d.prototype.maxBy=function(t){return void 0===t&&(t=y.Identity),this.aggregate(function(n,e){return t(n)>t(e)?n:e})},d.prototype.minBy=function(t){return void 0===t&&(t=y.Identity),this.aggregate(function(n,e){return t(n)<t(e)?n:e})},d.prototype.sum=function(t){void 0===t&&(t=o);var n=0,e=0;return this.forEach(function(r){var o=t(r);return isNaN(o)?(n=0/0,!1):void(isFinite(o)?n+=o:e+=o>0?1:-1)}),isNaN(n)?0/0:e?1/0*e:n},d.prototype.product=function(t){void 0===t&&(t=o);var n=1,e=!1;return this.forEach(function(r){e=!0;var o=t(r);return isNaN(o)?(n=0/0,!1):0==o?(n=0,!1):void(n*=o)}),e&&isNaN(n)?0/0:n},d.prototype.elementAt=function(t){if(isNaN(t)||0>t||!isFinite(t))throw new Error("'index' is invalid or out of bounds.");i(t,"index");var n=0|t,e=this;e.assertIsNotDisposed();var r,o=!1;if(e.forEach(function(t,e){return e==n?(r=t,o=!0,!1):void 0}),!o)throw new Error("index is less than 0 or greater than or equal to the number of elements in source.");return r},d.prototype.elementAtOrDefault=function(t,n){if(void 0===n&&(n=null),isNaN(t)||0>t||!isFinite(t))throw new Error("'index' is invalid or out of bounds.");i(t,"index");var e=0|t,r=this;r.assertIsNotDisposed();var o,u=!1;return r.forEach(function(t,n){return n==e?(o=t,u=!0,!1):void 0}),u?o:n},d.prototype.first=function(){var t=this;t.assertIsNotDisposed();var n,e=!1;if(t.forEach(function(t){return n=t,e=!0,!1}),!e)throw new Error("first:No element satisfies the condition.");return n},d.prototype.firstOrDefault=function(t){void 0===t&&(t=null);var n=this;n.assertIsNotDisposed();var e,r=!1;return n.forEach(function(t){return e=t,r=!0,!1}),r?e:t},d.prototype.last=function(){var t=this;t.assertIsNotDisposed();var n,e=!1;if(t.forEach(function(t){e=!0,n=t}),!e)throw new Error("last:No element satisfies the condition.");return n},d.prototype.lastOrDefault=function(t){void 0===t&&(t=null);var n=this;n.assertIsNotDisposed();var e,r=!1;return n.forEach(function(t){r=!0,e=t}),r?e:t},d.prototype.single=function(){var t=this;t.assertIsNotDisposed();var n,e=!1;if(t.forEach(function(t){if(e)throw new Error("single:sequence contains more than one element.");e=!0,n=t}),!e)throw new Error("single:No element satisfies the condition.");return n},d.prototype.singleOrDefault=function(t){void 0===t&&(t=null);var n=this;n.assertIsNotDisposed();var e,r=!1;return n.forEach(function(t){if(r)throw new Error("single:sequence contains more than one element.");r=!0,e=t}),r?e:t},d.prototype.share=function(){var n=this;n.assertIsNotDisposed();var e;return new d(function(){return new s(function(){e||(e=n.getEnumerator())},function(t){return e.moveNext()&&t.yieldReturn(e.current)})},function(){t.dispose(e)})},d.prototype.memoize=function(){var n,e,o=this,i=!o.assertIsNotDisposed();return new d(function(){var t=h;return new s(function(){r(i),e||(e=o.getEnumerator()),n||(n=[]),t=h},function(o){r(i);var u=t++;return u>=n.length?e.moveNext()?o.yieldReturn(n[u]=e.current):!1:o.yieldReturn(n[u])})},function(){i=!0,n&&(n.length=0),n=null,t.dispose(e),e=null})},d.prototype.catchError=function(n){var e=this,o=!e.assertIsNotDisposed();return new d(function(){var i;return new s(function(){try{r(o),i=e.getEnumerator()}catch(t){}},function(t){try{if(r(o),i.moveNext())return t.yieldReturn(i.current)}catch(e){n(e)}return!1},function(){t.dispose(i)})})},d.prototype.finallyAction=function(n){var e=this,o=!e.assertIsNotDisposed();return new d(function(){var i;return new s(function(){r(o),i=e.getEnumerator()},function(t){return r(o),i.moveNext()?t.yieldReturn(i.current):!1},function(){try{t.dispose(i)}finally{n()}})})},d}(t.DisposableBase);e.Enumerable=E;var N=function(e){function r(n){var r=this;r._source=n,e.call(this,function(){return r.assertIsNotDisposed(),new t.Collections.ArrayEnumerator(function(){return r.assertIsNotDisposed("The underlying ArrayEnumerable was disposed."),r._source})})}return n(r,e),r.prototype._onDispose=function(){e.prototype._onDispose.call(this),this._source=null},Object.defineProperty(r.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),r.prototype.toArray=function(){var t=this.source;if(!t)return[];if(t instanceof Array)return t.slice();for(var n=t.length,e=new Array(n),r=h;n>r;++r)e[r]=t[r];return e},r.prototype.asEnumerable=function(){return new r(this._source)},r.prototype.forEach=function(t){var n=this;n.assertIsNotDisposed();var e=n._source;if(e)for(var r=h;r<e.length&&t(e[r],r)!==!1;++r);},r.prototype.any=function(t){var n=this;n.assertIsNotDisposed();var r=n._source,o=r?r.length:0;return o&&(!t||e.prototype.any.call(this,t))},r.prototype.count=function(t){var n=this;n.assertIsNotDisposed();var r=n._source,o=r?r.length:0;return o&&(t?e.prototype.count.call(this,t):o)},r.prototype.elementAt=function(t){var n=this;n.assertIsNotDisposed();var r=n._source;return t<r.length&&t>=0?r[t]:e.prototype.elementAt.call(this,t)},r.prototype.elementAtOrDefault=function(t,n){void 0===n&&(n=null);var e=this;e.assertIsNotDisposed();var r=e._source;return t<r.length&&t>=0?r[t]:n},r.prototype.first=function(){var t=this;t.assertIsNotDisposed();var n=t._source;return n&&n.length?n[0]:e.prototype.first.call(this)},r.prototype.firstOrDefault=function(t){void 0===t&&(t=null);var n=this;n.assertIsNotDisposed();var e=n._source;return e&&e.length?e[0]:t},r.prototype.last=function(){var t=this;t.assertIsNotDisposed();var n=t._source,r=n.length;return r?n[r-1]:e.prototype.last.call(this)},r.prototype.lastOrDefault=function(t){void 0===t&&(t=null);var n=this;n.assertIsNotDisposed();var e=n._source,r=e.length;return r?e[r-1]:t},r.prototype.skip=function(n){var e=this;return!n||0>n?e.asEnumerable():new E(function(){return new t.Collections.ArrayEnumerator(function(){return e._source},n)})},r.prototype.takeExceptLast=function(t){void 0===t&&(t=1);var n=this,e=n._source?n._source.length:0;return n.take(e-t)},r.prototype.takeFromLast=function(t){if(!t||0>t)return E.empty();var n=this,e=n._source?n._source.length:0;return n.skip(e-t)},r.prototype.reverse=function(){var n=this;return new E(function(){return new t.Collections.ArrayEnumerator(function(){return n._source},n._source?n._source.length-1:0,-1)})},r.prototype.memoize=function(){return new r(this._source)},r.prototype.sequenceEqual=function(n,o){return void 0===o&&(o=t.areEqual),n instanceof Array?u.areEqual(this.source,n,!0,o):n instanceof r?n.sequenceEqual(this.source,o):e.prototype.sequenceEqual.call(this,n,o)},r.prototype.toJoinedString=function(t,n){void 0===t&&(t=""),void 0===n&&(n=y.Identity);var r=this._source;return!n&&r instanceof Array?r.join(t):e.prototype.toJoinedString.call(this,t,n)},r}(E);e.ArrayEnumerable=N;var x=function(e){function r(t,n){e.call(this,null),this.prevSource=t,this.prevPredicate=n}return n(r,e),r.prototype.where=function(t){if(t.length>1)return e.prototype.where.call(this,t);var n=this.prevPredicate,o=function(e){return n(e)&&t(e)};return new r(this.prevSource,o)},r.prototype.select=function(t){return t.length>1?e.prototype.select.call(this,t):new D(this.prevSource,this.prevPredicate,t)},r.prototype.getEnumerator=function(){var n,e=this.prevPredicate,r=this.prevSource;return new t.Collections.EnumeratorBase(function(){n=r.getEnumerator()},function(t){for(;n.moveNext();)if(e(n.current))return t.yieldReturn(n.current);return!1},function(){t.dispose(n)})},r.prototype._onDispose=function(){e.prototype._onDispose.call(this),this.prevPredicate=null,this.prevSource=null},r}(E);e.WhereEnumerable=x;var D=function(e){function r(t,n,r){e.call(this,null),this.prevSource=t,this.prevPredicate=n,this.prevSelector=r}return n(r,e),r.prototype.where=function(t){return t.length>1?e.prototype.where.call(this,t):new x(this,t)},r.prototype.select=function(t){if(t.length>1)return e.prototype.select.call(this,t);var n=this,o=n.prevSelector,i=function(n){return t(o(n))};return new r(n.prevSource,n.prevPredicate,i)},r.prototype.getEnumerator=function(){var n,e=this,r=e.prevPredicate,o=e.prevSource,i=e.prevSelector;return new s(function(){n=o.getEnumerator()},function(t){for(;n.moveNext();){var e=n.current;if(null==r||r(e))return t.yieldReturn(i(e))}return!1},function(){t.dispose(n)})},r.prototype._onDispose=function(){var t=this;e.prototype._onDispose.call(this),t.prevPredicate=null,t.prevSource=null,t.prevSelector=null},r}(E);e.WhereSelectEnumerable=D;var I=function(e){function r(t,n,r,o){e.call(this,null),this.source=t,this.keySelector=n,this.descending=r,this.parent=o}return n(r,e),r.prototype.createOrderedEnumerable=function(t,n){return new r(this.source,t,n,this)},r.prototype.thenBy=function(t){return this.createOrderedEnumerable(t,!1)},r.prototype.thenByDescending=function(t){return this.createOrderedEnumerable(t,!0)},r.prototype.getEnumerator=function(){var n,e,r=this,o=h;return new t.Collections.EnumeratorBase(function(){o=h,n=[],e=[],E.forEach(r.source,function(t,r){n[r]=t,e[r]=r});var t=R.create(r);t.generateKeys(n),e.sort(function(n,e){return t.compare(n,e)})},function(t){return o<e.length?t.yieldReturn(n[e[o++]]):!1},function(){n&&(n.length=0),n=null,e&&(e.length=0),e=null})},r.prototype._onDispose=function(){e.prototype._onDispose.call(this),this.source=null,this.keySelector=null,this.descending=null,this.parent=null},r}(E);e.OrderedEnumerable=I;var R=function(){function n(t,n,e){this.keySelector=t,this.descending=n,this.child=e,this.keys=null}return n.create=function(t,e){void 0===e&&(e=null);var r=new n(t.keySelector,t.descending,e);return t.parent?n.create(t.parent,r):r},n.prototype.generateKeys=function(t){for(var n=this,e=0|t.length,r=n.keySelector,o=new Array(e),i=h;e>i;++i)o[i]=r(t[i]);n.keys=o,n.child&&n.child.generateKeys(t)},n.prototype.compare=function(n,e){var r=this,o=r.keys,i=t.compare(o[n],o[e]);if(0==i){var u=r.child;return u?u.compare(n,e):t.compare(n,e)}return r.descending?-i:i},n}(),k=function(){function n(t){this._dictionary=t}return Object.defineProperty(n.prototype,"count",{get:function(){return this._dictionary.count},enumerable:!0,configurable:!0}),n.prototype.get=function(t){return this._dictionary.get(t)},n.prototype.contains=function(t){return this._dictionary.containsKey(t)},n.prototype.getEnumerator=function(){var n,e=this;return new t.Collections.EnumeratorBase(function(){n=e._dictionary.getEnumerator()},function(t){if(!n.moveNext())return!1;var e=n.current;return t.yieldReturn(new b(e.key,e.value))},function(){t.dispose(n)})},n}();e.Lookup=k;var b=function(t){function e(n,e){t.call(this,e),this._groupKey=n}return n(e,t),Object.defineProperty(e.prototype,"key",{get:function(){return this._groupKey},enumerable:!0,configurable:!0}),e}(N);e.Grouping=b}(e=t.Linq||(t.Linq={}))}(t||(t={})),"function"==typeof define&&define.amd?define("System.Linq",["System"],function(t){return t.Linq}):"undefined"!=typeof module&&module.exports&&(module.exports=t.Linq)}(this);
//# sourceMappingURL=../amd/System.Linq.js.map