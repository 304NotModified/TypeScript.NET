var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},System;(function(n){(function(t){"use strict";function u(t){return n.DisposableBase.assertIsNotDisposed(t,"Enumerable was disposed.")}function w(n){return isNaN(n)?NaN:n}function e(n,t){if(typeof n===s.Number&&!isNaN(n)&&n!=(n|0))throw new Error("'"+t+"' must be an integer.");return!0}var tt=n.Collections.ArrayUtility,i=n.Collections.EnumeratorBase,p=n.Collections.Dictionary,h=n.using,it=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.Greater=function(n,t){return n>t?n:t},t.prototype.Lesser=function(n,t){return n<t?n:t},t}(n.Functions),f=new it,s=new n.Types,r=0,k=-1,d=1,g,o,c,l,a,v,nt,b,y;(function(n){n[n.Break=0]="Break";n[n.Return=1]="Return";n[n.Skip=2]="Skip"})(t.EnumerableAction||(t.EnumerableAction={}));g=t.EnumerableAction;o=function(t){function o(n,i){t.call(this,i);this.enumeratorFactory=n}return __extends(o,t),o.fromArray=function(n){return new c(n)},o.from=function(t){if("getEnumerator"in t)return t;if(t instanceof Array||typeof t===n.Types.Object&&"length"in t)return o.fromArray(t);throw new Error("Unsupported enumerable.");},o.prototype.getEnumerator=function(){return this.assertIsNotDisposed(),this.enumeratorFactory()},o.prototype._onDispose=function(){t.prototype._onDispose.call(this);this.enumeratorFactory=null},o.choice=function(n){return new o(function(){return new i(null,function(t){return t.yieldReturn(n[Math.random()*n.length|0])})})},o.cycle=function(n){return new o(function(){var t=r;return new i(function(){t=r},function(i){return t>=n.length&&(t=r),i.yieldReturn(n[t++])})})},o.empty=function(){return new o(function(){return new i(null,f.False)})},o.repeat=function(n,t){return(typeof t=="undefined"&&(t=Infinity),isNaN(t)||t<=0)?o.empty():isFinite(t)&&e(t,"count")?new o(function(){var f=t|0,u=r;return new i(function(){u=r},function(t){return u++<f&&t.yieldReturn(n)})}):new o(function(){return new i(null,function(t){return t.yieldReturn(n)})})},o.repeatWithFinalize=function(n,t){return new o(function(){var r;return new i(function(){r=n()},function(n){return n.yieldReturn(r)},function(){t(r)})})},o.make=function(n){return o.repeat(n,d)},o.range=function(n,t,u){if(typeof n=="undefined"&&(n=0),typeof t=="undefined"&&(t=Infinity),typeof u=="undefined"&&(u=1),!isFinite(n))throw new Error("Must have a valid 'start' value.");if(isNaN(t)||t<=0)return o.empty();if(!isFinite(u))throw new Error("Must have a valid 'step' value.");return isFinite(t)&&e(t,"count")?new o(function(){var f,o=t|0,e=r;return new i(function(){e=r;f=n},function(n){var i=e++<o&&n.yieldReturn(f);return i&&e<t&&(f+=u),i})}):new o(function(){var t;return new i(function(){t=n},function(n){var i=t;return t+=u,n.yieldReturn(i)})})},o.rangeDown=function(n,t,i){return typeof n=="undefined"&&(n=0),typeof t=="undefined"&&(t=Infinity),typeof i=="undefined"&&(i=1),i=Math.abs(i)*-1,o.range(n,t,i)},o.toInfinity=function(n,t){return typeof n=="undefined"&&(n=0),typeof t=="undefined"&&(t=1),o.range(n,Infinity,t)},o.toNegativeInfinity=function(n,t){return typeof n=="undefined"&&(n=0),typeof t=="undefined"&&(t=1),o.rangeDown(n,Infinity,t)},o.rangeTo=function(n,t,r){if(typeof n=="undefined"&&(n=0),typeof t=="undefined"&&(t=Infinity),typeof r=="undefined"&&(r=1),!isFinite(n))throw new Error("Must have a valid 'start' value.");if(isNaN(t))throw new Error("Must have a valid 'to' value.");if(!isFinite(r))throw new Error("Must have a valid 'step' value.");return(r=Math.abs(r),!isFinite(t))?o.range(n,Infinity,n<t?+r:-r):new o(function(){var u;return n<t?new i(function(){u=n},function(n){var i=u<=t&&n.yieldReturn(u);return i&&(u+=r),i}):new i(function(){u=n},function(n){var i=u>=t&&n.yieldReturn(u);return i&&(u-=r),i})})},o.matches=function(n,t,r){typeof r=="undefined"&&(r="");var u=typeof n;if(u!=s.String)throw new Error("Cannot exec RegExp matches of type '"+u+"'.");return t instanceof RegExp&&(r+=t.ignoreCase?"i":"",r+=t.multiline?"m":"",t=t.source),r.indexOf("g")===-1&&(r+="g"),new o(function(){var u;return new i(function(){u=new RegExp(t,r)},function(t){var i=u.exec(n);return i!==null?t.yieldReturn(i):!1})})},o.generate=function(n,t){return(typeof t=="undefined"&&(t=Infinity),isNaN(t)||t<=0)?o.empty():isFinite(t)&&e(t,"count")?new o(function(){var f=t|0,u=r;return new i(function(){u=r},function(t){var i=u++;return i<f&&t.yieldReturn(n(i))})}):new o(function(){var t=r;return new i(function(){t=r},function(i){return i.yieldReturn(n(t++))})})},o.unfold=function(n,t,u){return typeof u=="undefined"&&(u=!1),new o(function(){var o=r,f,e;return new i(function(){o=r;f=n;e=!u},function(n){var i=o++;return e?e=!1:f=t(f,i),n.yieldReturn(f)})})},o.defer=function(n){return new o(function(){var t;return new i(function(){t=n().getEnumerator()},function(n){return t.moveNext()&&n.yieldReturn(t.current)},function(){t.dispose()})})},o.forEach=function(n,t){var i=n,r=0;h(i.getEnumerator(),function(n){while(n.moveNext()&&t(n.current,r++)!==!1);})},o.max=function(n){return n.takeUntil(function(n){return n==+Infinity},!0).aggregate(f.Greater)},o.min=function(n){return n.takeUntil(function(n){return n==-Infinity},!0).aggregate(f.Lesser)},o.prototype.assertIsNotDisposed=function(n){return typeof n=="undefined"&&(n="Enumerable was disposed."),t.prototype.assertIsNotDisposed.call(this,n)},o.prototype.forEach=function(n){var t=this,i;t.assertIsNotDisposed();i=r;h(t.getEnumerator(),function(r){while(t.assertIsNotDisposed()&&r.moveNext()&&n(r.current,i++)!==!1);})},o.prototype.toArray=function(n){var t=[];return n?this.where(n).toArray():(this.forEach(function(n){return t.push(n)}),t)},o.prototype.asEnumerable=function(){var n=this;return new o(function(){return n.getEnumerator()})},o.prototype.toLookup=function(n,t,i){typeof t=="undefined"&&(t=f.Identity);typeof i=="undefined"&&(i=f.Identity);var r=new p(i);return this.forEach(function(i){var u=n(i),f=t(i),e=r.get(u);e!==undefined?e.push(f):r.addByKeyValue(u,[f])}),new b(r)},o.prototype.toMap=function(n,t){var i={};return this.forEach(function(r){i[n(r)]=t(r)}),i},o.prototype.toDictionary=function(n,t,i){typeof i=="undefined"&&(i=f.Identity);var r=new p(i);return this.forEach(function(i){return r.addByKeyValue(n(i),t(i))}),r},o.prototype.toJoinedString=function(n,t){return typeof n=="undefined"&&(n=""),typeof t=="undefined"&&(t=f.Identity),this.select(t).toArray().join(n)},o.prototype.doAction=function(n){var f=this,t=!f.assertIsNotDisposed();return new o(function(){var e,o=r;return new i(function(){u(t);o=r;e=f.getEnumerator()},function(i){for(u(t);e.moveNext();){var r=n(e.current,o++);if(r===!1||r===g)return i.yieldBreak();if(r!==2)return i.yieldReturn(e.current)}return!1},function(){e.dispose()})},function(){t=!0})},o.prototype.force=function(n){typeof n=="undefined"&&(n=0);this.assertIsNotDisposed();this.doAction(function(){return n})},o.prototype.skip=function(n){var t=this,i;return(t.assertIsNotDisposed(),!n||isNaN(n)||n<0)?t:isFinite(n)?(e(n,"count"),i=n|0,this.doAction(function(n,t){return t<i?2:1})):o.empty()},o.prototype.skipWhile=function(n){this.assertIsNotDisposed();var t=!0;return this.doAction(function(i,r){return t&&(t=n(i,r)),t?2:1})},o.prototype.take=function(n){var t,i;return!n||isNaN(n)||n<0?o.empty():(t=this,t.assertIsNotDisposed(),!isFinite(n))?t:(e(n,"count"),i=n|0,t.doAction(function(n,t){return t<i}))},o.prototype.takeWhile=function(n){return this.assertIsNotDisposed(),this.doAction(function(t,i){return n(t,i)?1:0})},o.prototype.takeUntil=function(n,t){if(this.assertIsNotDisposed(),!t)return this.doAction(function(t,i){return n(t,i)?0:1});var i=!1;return this.doAction(function(t,r){return i?0:(i=n(t,r),1)})},o.prototype.takeExceptLast=function(n){var t,r;return(typeof n=="undefined"&&(n=1),t=this,!n||isNaN(n)||n<=0)?t:isFinite(n)?(e(n,"count"),r=n|0,new o(function(){var n,u;return new i(function(){n=t.getEnumerator();u=[]},function(t){while(n.moveNext())if(u.push(n.current),u.length>r)return t.yieldReturn(u.shift());return!1},function(){n.dispose()})})):o.empty()},o.prototype.takeFromLast=function(n){if(!n||isNaN(n)||n<=0)return o.empty();var t=this;return isFinite(n)?(e(n,"count"),t.reverse().take(n|0)):t.reverse()},o.prototype.traverseBreadthFirst=function(n,t){var u=this;return new o(function(){var f,s=r,e;return new i(function(){s=r;e=[];f=u.getEnumerator()},function(i){for(;;){if(f.moveNext())return e.push(f.current),i.yieldReturn(t(f.current,s));var r=o.fromArray(e).selectMany(function(t){return n(t)});if(r.any())s++,e=[],f.dispose(),f=r.getEnumerator();else return!1}},function(){f.dispose()})})},o.prototype.traverseDepthFirst=function(t,r){var u=this;return new o(function(){var e=[],f;return new i(function(){f=u.getEnumerator()},function(n){for(;;){if(f.moveNext()){var i=r(f.current,e.length);return e.push(f),f=t(f.current).getEnumerator(),n.yieldReturn(i)}if(e.length==0)return!1;f.dispose();f=e.pop()}},function(){try{f.dispose()}finally{n.disposeThese(e)}})})},o.prototype.flatten=function(){var t=this;return new o(function(){var u,r=null;return new i(function(){u=t.getEnumerator()},function(n){for(;;){if(r!=null){if(r.moveNext())return n.yieldReturn(r.current);r=null}if(u.moveNext()){var t=u.current;if(t instanceof Array){r.dispose();r=o.fromArray(t).selectMany(f.Identity).flatten().getEnumerator();continue}else return n.yieldReturn(u.current)}return!1}},function(){n.dispose(u,r)})})},o.prototype.pairwise=function(n){var t=this;return new o(function(){var r;return new i(function(){r=t.getEnumerator();r.moveNext()},function(t){var i=r.current;return r.moveNext()&&t.yieldReturn(n(i,r.current))},function(){r.dispose()})})},o.prototype.scan=function(n,t){var r=t!==undefined,u=this;return new o(function(){var f,e,o;return new i(function(){f=u.getEnumerator();o=!0},function(i){return o?(o=!1,r?i.yieldReturn(e=t):f.moveNext()&&i.yieldReturn(e=f.current)):f.moveNext()?i.yieldReturn(e=n(e,f.current)):!1},function(){f.dispose()})})},o.prototype.select=function(n){var t=this,f=!t.assertIsNotDisposed();return n.length<2?new a(t,null,n):new o(function(){var e,o=r;return new i(function(){u(f);o=r;e=t.getEnumerator()},function(t){return u(f),e.moveNext()?t.yieldReturn(n(e.current,o++)):!1},function(){e.dispose()})},function(){f=!0})},o.prototype.selectMany=function(t,u){var f=this;return u||(u=function(n,t){return t}),new o(function(){var o,e,s=r;return new i(function(){o=f.getEnumerator();e=undefined;s=r},function(i){if(e===undefined&&!o.moveNext())return!1;do{if(!e){var r=t(o.current,s++);if(!r)continue;e=n.Collections.Enumerator.from(r)}if(e.moveNext())return i.yieldReturn(u(o.current,e.current));e.dispose();e=null}while(o.moveNext());return!1},function(){n.dispose(o,e);o=null;e=null})})},o.prototype.choose=function(n){var f=this,t=!f.assertIsNotDisposed();return new o(function(){var e,o=r;return new i(function(){u(t);o=r;e=f.getEnumerator()},function(i){for(u(t);e.moveNext();){var r=n(e.current,o++);if(r!==null&&r!==undefined)return i.yieldReturn(r)}return!1},function(){e.dispose()})},function(){t=!0})},o.prototype.where=function(n){var t=this,f=!t.assertIsNotDisposed();return n.length<2?new l(t,n):new o(function(){var e,o=r;return new i(function(){u(f);o=r;e=t.getEnumerator()},function(t){for(u(f);e.moveNext();)if(n(e.current,o++))return t.yieldReturn(e.current);return!1},function(){e.dispose()})},function(){f=!0})},o.prototype.ofType=function(n){var t;switch(n){case Number:t=s.Number;break;case String:t=s.String;break;case Boolean:t=s.Boolean;break;case Function:t=s.Function;break;default:t=null}return t===null?this.where(function(t){return t instanceof n}):this.where(function(n){return typeof n===t})},o.prototype.except=function(t,r){var e=this,f=!e.assertIsNotDisposed();return new o(function(){var h,s;return new i(function(){u(f);h=e.getEnumerator();s=new n.Collections.Dictionary(r);t&&o.forEach(t,function(n){return s.addByKeyValue(n,!0)})},function(n){for(u(f);h.moveNext();){var t=h.current;if(!s.containsKey(t))return s.addByKeyValue(t,!0),n.yieldReturn(t)}return!1},function(){h.dispose();s.clear()})},function(){f=!0})},o.prototype.distinct=function(n){return this.except(null,n)},o.prototype.distinctUntilChanged=function(n){var r=this,t=!r.assertIsNotDisposed();return new o(function(){var f,e,o=!0;return new i(function(){u(t);f=r.getEnumerator()},function(i){for(u(t);f.moveNext();){var r=n(f.current);if(o)o=!1;else if(e===r)continue;return e=r,i.yieldReturn(f.current)}return!1},function(){f.dispose()})},function(){t=!0})},o.prototype.reverse=function(){var n=this,t=!n.assertIsNotDisposed();return new o(function(){var f,e=r;return new i(function(){u(t);f=n.toArray();e=f.length|0},function(n){return e>r&&n.yieldReturn(f[--e])},function(){f.length=0})},function(){t=!0})},o.prototype.shuffle=function(){var n=this,t=!n.assertIsNotDisposed();return new o(function(){var r;return new i(function(){u(t);r=n.toArray()},function(n){var t=r.length;return t&&n.yieldReturn(r.splice(Math.random()*t|0,d).pop())},function(){r.length=0})},function(){t=!0})},o.prototype.count=function(n){var i=this,t;return i.assertIsNotDisposed(),t=r,n?i.forEach(function(i,r){n(i,r)&&++t}):i.forEach(function(){++t}),t},o.prototype.all=function(n){var t=!0;return this.forEach(function(i){if(!n(i))return t=!1,!1}),t},o.prototype.every=function(n){return this.all(n)},o.prototype.any=function(n){var t=!1;return n?this.forEach(function(i){return t=n(i),!t}):this.forEach(function(){return t=!0,!1}),t},o.prototype.some=function(n){return this.any(n)},o.prototype.isEmpty=function(){return!this.any()},o.prototype.contains=function(n,t){return t?this.any(function(i){return t(i)===t(n)}):this.any(function(t){return t===n})},o.prototype.indexOf=function(t,i){var r=k;return i?this.forEach(function(u,f){if(n.areEqual(i(u),i(t),!0))return r=f,!1}):this.forEach(function(i,u){if(n.areEqual(i,t,!0))return r=u,!1}),r},o.prototype.lastIndexOf=function(t,i){var r=k;return i?this.forEach(function(u,f){n.areEqual(i(u),i(t),!0)&&(r=f)}):this.forEach(function(i,u){n.areEqual(i,t,!0)&&(r=u)}),r},o.prototype.defaultIfEmpty=function(n){typeof n=="undefined"&&(n=null);var t=this,r=!t.assertIsNotDisposed();return new o(function(){var f,e;return new i(function(){e=!0;u(r);f=t.getEnumerator()},function(t){return(u(r),f.moveNext())?(e=!1,t.yieldReturn(f.current)):e?(e=!1,t.yieldReturn(n)):!1},function(){f.dispose()})})},o.prototype.zipWith=function(t,u){var f=this;return new o(function(){var e,s,h=r;return new i(function(){h=r;e=f.getEnumerator();s=o.from(t).getEnumerator()},function(n){return e.moveNext()&&s.moveNext()&&n.yieldReturn(u(e.current,s.current,h++))},function(){n.dispose(e,s)})})},o.prototype.concatWith=function(t){var r=this;return new o(function(){var f,u;return new i(function(){f=r.getEnumerator()},function(n){if(u==null){if(f.moveNext())return n.yieldReturn(f.current);u=o.from(t).getEnumerator()}return u.moveNext()?n.yieldReturn(u.current):!1},function(){n.dispose(f,u)})})},o.prototype.concatMultiple=function(n){var t=this;return n.length?n.length==1?t.concatWith(n[0]):(n=n.slice(),new o(function(){var t;return new i(null,function(i){while(!t&&n.length)t=n.shift();return t&&t.moveNext()?i.yieldReturn(t.current):(t&&(t.dispose(),t=null),i.yieldBreak())})})):t},o.prototype.concat=function(){for(var i,n=[],t=0;t<arguments.length-0;t++)n[t]=arguments[t+0];return(i=this,n.length==0)?i:n.length==1?i.concatWith(n[0]):i.concatMultiple(n)},o.prototype.sequenceEqual=function(t,i){return typeof i=="undefined"&&(i=n.areEqual),h(this.getEnumerator(),function(n){return h(t.getEnumerator(),function(t){while(n.moveNext())if(!t.moveNext()||!i(n.current,t.current))return!1;return!t.moveNext()})})},o.prototype.union=function(t,r){typeof r=="undefined"&&(r=f.Identity);var u=this;return new o(function(){var s,f,e;return new i(function(){s=u.getEnumerator();e=new p(r)},function(n){var i;if(f===undefined){while(s.moveNext())if(i=s.current,!e.containsKey(i))return e.addByKeyValue(i,null),n.yieldReturn(i);f="getEnumerator"in t?t:o.fromArray(t).getEnumerator()}while(f.moveNext())if(i=f.current,!e.containsKey(i))return e.addByKeyValue(i,null),n.yieldReturn(i);return!1},function(){n.dispose(s,f)})})},o.prototype.orderBy=function(n){return typeof n=="undefined"&&(n=f.Identity),new v(this,n,!1)},o.prototype.orderByDescending=function(n){return typeof n=="undefined"&&(n=f.Identity),new v(this,n,!0)},o.prototype.groupBy=function(n,t,i){typeof t=="undefined"&&(t=f.Identity);var r=this;return new o(function(){return r.toLookup(n,t,i).getEnumerator()})},o.prototype.partitionBy=function(n,t,r,u){typeof t=="undefined"&&(t=f.Identity);typeof r=="undefined"&&(r=function(n,t){return new y(n,t)});typeof u=="undefined"&&(u=f.Identity);var e=this;return new o(function(){var f,s,h,o=[];return new i(function(){f=e.getEnumerator();f.moveNext()&&(s=n(f.current),h=u(s),o.push(t(f.current)))},function(i){for(var e,c;e=f.moveNext();)if(h===u(n(f.current)))o.push(t(f.current));else break;return o.length?(c=r(s,o),e?(s=n(f.current),h=u(s),o=[t(f.current)]):o=[],i.yieldReturn(c)):!1},function(){f.dispose()})})},o.prototype.buffer=function(n){if(n<1||!isFinite(n))throw new Error("Invalid buffer size.");e(n,"size");var t=this;return new o(function(){var r;return new i(function(){r=t.getEnumerator()},function(t){for(var i=[];i.length<n&&r.moveNext;)i.push(r.current);return i.length&&t.yieldReturn(i)},function(){r.dispose()})})},o.prototype.aggregate=function(n,t){return this.scan(n,t).lastOrDefault()},o.prototype.average=function(n){typeof n=="undefined"&&(n=w);var t=0,i=0,r=0;return(this.forEach(function(u){var f=n(u);if(!isNaN(f))return t=NaN,!1;isFinite(f)?t+=f:i+=f>0?1:-1;++r}),i)?i*Infinity:isNaN(t)||!r?NaN:t/r},o.prototype.max=function(){return this.aggregate(f.Greater)},o.prototype.min=function(){return this.aggregate(f.Lesser)},o.prototype.maxBy=function(n){return typeof n=="undefined"&&(n=f.Identity),this.aggregate(function(t,i){return n(t)>n(i)?t:i})},o.prototype.minBy=function(n){return typeof n=="undefined"&&(n=f.Identity),this.aggregate(function(t,i){return n(t)<n(i)?t:i})},o.prototype.sum=function(n){typeof n=="undefined"&&(n=w);var t=0,i=0;return this.forEach(function(r){var u=n(r);if(!isNaN(u))return t=NaN,!1;isFinite(u)?t+=u:i+=u>0?1:-1}),isNaN(t)?NaN:i?t:i*Infinity},o.prototype.product=function(n){typeof n=="undefined"&&(n=w);var t=1,i=!1;return this.forEach(function(r){i=!0;var u=n(r);if(!isNaN(u))return t=NaN,!1;t*=u}),i&&isNaN(t)?NaN:t},o.prototype.elementAt=function(n){var r,t,u,i;if(isNaN(n)||n<0||!isFinite(n))throw new Error("'index' is invalid or out of bounds.");if(e(n,"index"),r=n|0,t=this,t.assertIsNotDisposed(),i=!1,t.forEach(function(n,t){if(t==r)return u=n,i=!0,!1}),!i)throw new Error("index is less than 0 or greater than or equal to the number of elements in source.");return u},o.prototype.elementAtOrDefault=function(n,t){var u,i,f,r;if(typeof t=="undefined"&&(t=null),isNaN(n)||n<0||!isFinite(n))throw new Error("'index' is invalid or out of bounds.");return e(n,"index"),u=n|0,i=this,i.assertIsNotDisposed(),r=!1,i.forEach(function(n,t){if(t==u)return f=n,r=!0,!1}),r?f:t},o.prototype.first=function(){var t=this,i,n;if(t.assertIsNotDisposed(),n=!1,t.forEach(function(t){return i=t,n=!0,!1}),!n)throw new Error("first:No element satisfies the condition.");return i},o.prototype.firstOrDefault=function(n){var t,r,i;return typeof n=="undefined"&&(n=null),t=this,t.assertIsNotDisposed(),i=!1,t.forEach(function(n){return r=n,i=!0,!1}),i?r:n},o.prototype.last=function(){var t=this,i,n;if(t.assertIsNotDisposed(),n=!1,t.forEach(function(t){n=!0;i=t}),!n)throw new Error("last:No element satisfies the condition.");return i},o.prototype.lastOrDefault=function(n){var t,r,i;return typeof n=="undefined"&&(n=null),t=this,t.assertIsNotDisposed(),i=!1,t.forEach(function(n){i=!0;r=n}),i?r:n},o.prototype.single=function(){var t=this,i,n;if(t.assertIsNotDisposed(),n=!1,t.forEach(function(t){if(n)throw new Error("single:sequence contains more than one element.");else n=!0,i=t}),!n)throw new Error("single:No element satisfies the condition.");return i},o.prototype.singleOrDefault=function(n){var i,r,t;return typeof n=="undefined"&&(n=null),i=this,i.assertIsNotDisposed(),t=!1,i.forEach(function(n){if(t)throw new Error("single:sequence contains more than one element.");else t=!0,r=n}),t?r:n},o.prototype.share=function(){var r=this,t;return r.assertIsNotDisposed(),new o(function(){return new i(function(){t||(t=r.getEnumerator())},function(n){return t.moveNext()&&n.yieldReturn(t.current)})},function(){n.dispose(t)})},o.prototype.memoize=function(){var f=this,t=!f.assertIsNotDisposed(),n;return new o(function(){var e,o=r;return new i(function(){u(t);e||(e=f.getEnumerator());n||(n=[]);o=r},function(i){u(t);var r=o++;return r>=n.length?e.moveNext()?i.yieldReturn(n[r]=e.current):!1:i.yieldReturn(n[r])})},function(){t=!0;n&&(n.length=0);n=null})},o.prototype.catchError=function(n){var t=this,r=!t.assertIsNotDisposed();return new o(function(){var f;return new i(function(){try{u(r);f=t.getEnumerator()}catch(n){}},function(t){try{if(u(r),f.moveNext())return t.yieldReturn(f.current)}catch(i){n(i)}return!1},function(){f.dispose()})})},o.prototype.finallyAction=function(n){var t=this,r=!t.assertIsNotDisposed();return new o(function(){var f;return new i(function(){u(r);f=t.getEnumerator()},function(n){return u(r),f.moveNext()?n.yieldReturn(f.current):!1},function(){try{f.dispose()}finally{n()}})})},o}(n.DisposableBase);t.Enumerable=o;c=function(t){function i(i){var r=this;r._source=i;t.call(this,function(){return r.assertIsNotDisposed(),new n.Collections.ArrayEnumerator(function(){return r.assertIsNotDisposed("The underlying ArrayEnumerable was disposed."),r._source})})}return __extends(i,t),i.prototype._onDispose=function(){t.prototype._onDispose.call(this);this._source=null},Object.defineProperty(i.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),i.prototype.toArray=function(){var n=this.source,i,u,t;if(!n)return[];if(n instanceof Array)return n.slice();for(i=n.length,u=new Array(i),t=r;t<i;++t)u[t]=n[t];return u},i.prototype.asEnumerable=function(){return new i(this._source)},i.prototype.forEach=function(n){var u=this,i,t;if(u.assertIsNotDisposed(),i=u._source,i)for(t=r;t<i.length;++t)if(n(i[t],t)===!1)break},i.prototype.any=function(n){var r=this,i,u;return r.assertIsNotDisposed(),i=r._source,u=i?i.length:0,u&&(!n||t.prototype.any.call(this,n))},i.prototype.count=function(n){var u=this,i,r;return u.assertIsNotDisposed(),i=u._source,r=i?i.length:0,r&&(n?t.prototype.count.call(this,n):r)},i.prototype.elementAt=function(n){var r=this,i;return r.assertIsNotDisposed(),i=r._source,n<i.length&&n>=0?i[n]:t.prototype.elementAt.call(this,n)},i.prototype.elementAtOrDefault=function(n,t){var i,r;return typeof t=="undefined"&&(t=null),i=this,i.assertIsNotDisposed(),r=i._source,n<r.length&&n>=0?r[n]:t},i.prototype.first=function(){var i=this,n;return i.assertIsNotDisposed(),n=i._source,n&&n.length?n[0]:t.prototype.first.call(this)},i.prototype.firstOrDefault=function(n){var i,t;return typeof n=="undefined"&&(n=null),i=this,i.assertIsNotDisposed(),t=i._source,t&&t.length?t[0]:n},i.prototype.last=function(){var r=this,n,i;return r.assertIsNotDisposed(),n=r._source,i=n.length,i?n[i-1]:t.prototype.last.call(this)},i.prototype.lastOrDefault=function(n){var t,i,r;return typeof n=="undefined"&&(n=null),t=this,t.assertIsNotDisposed(),i=t._source,r=i.length,r?i[r-1]:n},i.prototype.skip=function(t){var i=this;return!t||t<0?i.asEnumerable():new o(function(){return new n.Collections.ArrayEnumerator(function(){return i._source},t)})},i.prototype.takeExceptLast=function(n){typeof n=="undefined"&&(n=1);var t=this,i=t._source?t._source.length:0;return t.take(i-n)},i.prototype.takeFromLast=function(n){if(!n||n<0)return o.empty();var t=this,i=t._source?t._source.length:0;return t.skip(i-n)},i.prototype.reverse=function(){var t=this;return new o(function(){return new n.Collections.ArrayEnumerator(function(){return t._source},t._source?t._source.length-1:0,-1)})},i.prototype.memoize=function(){return new i(this._source)},i.prototype.sequenceEqual=function(r,u){return(typeof u=="undefined"&&(u=n.areEqual),r instanceof Array)?tt.areEqual(this.source,r,!0,u):r instanceof i?r.sequenceEqual(this.source,u):t.prototype.sequenceEqual.call(this,r,u)},i.prototype.toJoinedString=function(n,i){typeof n=="undefined"&&(n="");typeof i=="undefined"&&(i=f.Identity);var r=this._source;return!i&&r instanceof Array?r.join(n):t.prototype.toJoinedString.call(this,n,i)},i}(o);t.ArrayEnumerable=c;l=function(t){function i(n,i){t.call(this,null);this.prevSource=n;this.prevPredicate=i}return __extends(i,t),i.prototype.where=function(n){if(n.length>1)return t.prototype.where.call(this,n);var r=this.prevPredicate,u=function(t){return r(t)&&n(t)};return new i(this.prevSource,u)},i.prototype.select=function(n){return n.length>1?t.prototype.select.call(this,n):new a(this.prevSource,this.prevPredicate,n)},i.prototype.getEnumerator=function(){var i=this.prevPredicate,r=this.prevSource,t;return new n.Collections.EnumeratorBase(function(){t=r.getEnumerator()},function(n){while(t.moveNext())if(i(t.current))return n.yieldReturn(t.current);return!1},function(){t.dispose()})},i.prototype._onDispose=function(){t.prototype._onDispose.call(this);this.prevPredicate=null;this.prevSource=null},i}(o);t.WhereEnumerable=l;a=function(n){function t(t,i,r){n.call(this,null);this.prevSource=t;this.prevPredicate=i;this.prevSelector=r}return __extends(t,n),t.prototype.where=function(t){return t.length>1?n.prototype.where.call(this,t):new l(this,t)},t.prototype.select=function(i){if(i.length>1)return n.prototype.select.call(this,i);var r=this,u=r.prevSelector,f=function(n){return i(u(n))};return new t(r.prevSource,r.prevPredicate,f)},t.prototype.getEnumerator=function(){var t=this,r=t.prevPredicate,u=t.prevSource,f=t.prevSelector,n;return new i(function(){n=u.getEnumerator()},function(t){while(n.moveNext()){var i=n.current;if(r==null||r(i))return t.yieldReturn(f(i))}return!1},function(){n.dispose()})},t.prototype._onDispose=function(){var t=this;n.prototype._onDispose.call(this);t.prevPredicate=null;t.prevSource=null;t.prevSelector=null},t}(o);t.WhereSelectEnumerable=a;v=function(t){function i(n,i,r,u){t.call(this,null);this.source=n;this.keySelector=i;this.descending=r;this.parent=u}return __extends(i,t),i.prototype.createOrderedEnumerable=function(n,t){return new i(this.source,n,t,this)},i.prototype.thenBy=function(n){return this.createOrderedEnumerable(n,!1)},i.prototype.thenByDescending=function(n){return this.createOrderedEnumerable(n,!0)},i.prototype.getEnumerator=function(){var u=this,i,t,f=r;return new n.Collections.EnumeratorBase(function(){i=[];t=[];o.forEach(u.source,function(n,r){i.push(n);t.push(r)});var n=nt.create(u);n.generateKeys(i);t.sort(function(t,i){return n.compare(t,i)})},function(n){return f<t.length?n.yieldReturn(i[t[f++]]):!1},function(){i&&(i.length=0);i=null;t&&(t.length=0);t=null})},i.prototype._onDispose=function(){t.prototype._onDispose.call(this);this.source=null;this.keySelector=null;this.descending=null;this.parent=null},i}(o);t.OrderedEnumerable=v;nt=function(){function t(n,t,i){this.keySelector=n;this.descending=t;this.child=i;this.keys=null}return t.create=function(n,i){typeof i=="undefined"&&(i=null);var r=new t(n.keySelector,n.descending,i);return n.parent?t.create(n.parent,r):r},t.prototype.generateKeys=function(n){for(var t=this,u=n.length|0,e=t.keySelector,f=new Array(u),i=r;i<u;++i)f[i]=e(n[i]);t.keys=f;t.child&&t.child.generateKeys(n)},t.prototype.compare=function(t,i){var r=this,e=r.keys,u=n.compare(e[t],e[i]),f;return u==0?(f=r.child,f?f.compare(t,i):n.compare(t,i)):r.descending?-u:u},t}();b=function(){function t(n){this._dictionary=n}return Object.defineProperty(t.prototype,"count",{get:function(){return this._dictionary.count},enumerable:!0,configurable:!0}),t.prototype.get=function(n){return this._dictionary.get(n)},t.prototype.contains=function(n){return this._dictionary.containsKey(n)},t.prototype.getEnumerator=function(){var i=this,t;return new n.Collections.EnumeratorBase(function(){t=i._dictionary.getEnumerator()},function(n){if(!t.moveNext())return!1;var i=t.current;return n.yieldReturn(new y(i.key,i.value))},function(){t.dispose()})},t}();t.Lookup=b;y=function(n){function t(t,i){n.call(this,i);this._groupKey=t}return __extends(t,n),Object.defineProperty(t.prototype,"key",{get:function(){return this._groupKey},enumerable:!0,configurable:!0}),t}(c);t.Grouping=y})(n.Linq||(n.Linq={}));var t=n.Linq})(System||(System={}));
/*
//# sourceMappingURL=System.Linq.min.js.map
*/