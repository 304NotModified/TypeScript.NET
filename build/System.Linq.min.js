var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},System;(function(n){(function(t){"use strict";function f(t){return n.DisposableBase.assertIsNotDisposed(t,"Enumerable was disposed.")}function b(n){return isNaN(n)?NaN:n}function e(n,t){if(typeof n===s.Number&&!isNaN(n)&&n!=(n|0))throw new Error("'"+t+"' must be an integer.");return!0}var it=n.Collections.ArrayUtility,i=n.Collections.EnumeratorBase,h=n.Collections.Dictionary,w=n.using,c=n.Collections.Enumerator.from,rt=n.Collections.Enumerator.forEach,ut=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.Greater=function(n,t){return n>t?n:t},t.prototype.Lesser=function(n,t){return n<t?n:t},t}(n.Functions),u=new ut,s=new n.Types,r=0,d=-1,g=1,nt,o,l,a,v,y,tt,k,p;(function(n){n[n.Break=0]="Break";n[n.Return=1]="Return";n[n.Skip=2]="Skip"})(t.EnumerableAction||(t.EnumerableAction={}));nt=t.EnumerableAction;o=function(t){function o(n,i){t.call(this,i);this.enumeratorFactory=n}return __extends(o,t),o.fromArray=function(n){return new l(n)},o.from=function(t){if("getEnumerator"in t)return t;if(t instanceof Array||typeof t===n.Types.Object&&"length"in t)return o.fromArray(t);throw new Error("Unsupported enumerable.");},o.toArray=function(t){if(t instanceof Array)return t.slice();if(typeof t===n.Types.Object&&"length"in t&&(t=o.fromArray(t)),t instanceof o)return t.toArray();if("getEnumerator"in t){var i=[];return rt(t.getEnumerator(),function(n,t){i[t]=n}),i}throw new Error("Unsupported enumerable.");},o.prototype.getEnumerator=function(){return this.assertIsNotDisposed(),this.enumeratorFactory()},o.prototype._onDispose=function(){t.prototype._onDispose.call(this);this.enumeratorFactory=null},o.choice=function(n){return new o(function(){return new i(null,function(t){return t.yieldReturn(n[Math.random()*n.length|0])})})},o.cycle=function(n){return new o(function(){var t=r;return new i(function(){t=r},function(i){return t>=n.length&&(t=r),i.yieldReturn(n[t++])})})},o.empty=function(){return new o(function(){return new i(null,u.False)})},o.repeat=function(n,t){return(typeof t=="undefined"&&(t=Infinity),isNaN(t)||t<=0)?o.empty():isFinite(t)&&e(t,"count")?new o(function(){var f=t|0,u=r;return new i(function(){u=r},function(t){return u++<f&&t.yieldReturn(n)})}):new o(function(){return new i(null,function(t){return t.yieldReturn(n)})})},o.repeatWithFinalize=function(n,t){return new o(function(){var r;return new i(function(){r=n()},function(n){return n.yieldReturn(r)},function(){t(r)})})},o.make=function(n){return o.repeat(n,g)},o.range=function(n,t,u){if(typeof n=="undefined"&&(n=0),typeof t=="undefined"&&(t=Infinity),typeof u=="undefined"&&(u=1),!isFinite(n))throw new Error("Must have a valid 'start' value.");if(isNaN(t)||t<=0)return o.empty();if(!isFinite(u))throw new Error("Must have a valid 'step' value.");return isFinite(t)&&e(t,"count")?new o(function(){var f,o=t|0,e=r;return new i(function(){e=r;f=n},function(n){var i=e++<o&&n.yieldReturn(f);return i&&e<t&&(f+=u),i})}):new o(function(){var t;return new i(function(){t=n},function(n){var i=t;return t+=u,n.yieldReturn(i)})})},o.rangeDown=function(n,t,i){return typeof n=="undefined"&&(n=0),typeof t=="undefined"&&(t=Infinity),typeof i=="undefined"&&(i=1),i=Math.abs(i)*-1,o.range(n,t,i)},o.toInfinity=function(n,t){return typeof n=="undefined"&&(n=0),typeof t=="undefined"&&(t=1),o.range(n,Infinity,t)},o.toNegativeInfinity=function(n,t){return typeof n=="undefined"&&(n=0),typeof t=="undefined"&&(t=1),o.rangeDown(n,Infinity,t)},o.rangeTo=function(n,t,r){if(typeof n=="undefined"&&(n=0),typeof t=="undefined"&&(t=Infinity),typeof r=="undefined"&&(r=1),!isFinite(n))throw new Error("Must have a valid 'start' value.");if(isNaN(t))throw new Error("Must have a valid 'to' value.");if(!isFinite(r))throw new Error("Must have a valid 'step' value.");return(r=Math.abs(r),!isFinite(t))?o.range(n,Infinity,n<t?+r:-r):new o(function(){var u;return n<t?new i(function(){u=n},function(n){var i=u<=t&&n.yieldReturn(u);return i&&(u+=r),i}):new i(function(){u=n},function(n){var i=u>=t&&n.yieldReturn(u);return i&&(u-=r),i})})},o.matches=function(n,t,r){typeof r=="undefined"&&(r="");var u=typeof n;if(u!=s.String)throw new Error("Cannot exec RegExp matches of type '"+u+"'.");return t instanceof RegExp&&(r+=t.ignoreCase?"i":"",r+=t.multiline?"m":"",t=t.source),r.indexOf("g")===-1&&(r+="g"),new o(function(){var u;return new i(function(){u=new RegExp(t,r)},function(t){var i=u.exec(n);return i!==null?t.yieldReturn(i):!1})})},o.generate=function(n,t){return(typeof t=="undefined"&&(t=Infinity),isNaN(t)||t<=0)?o.empty():isFinite(t)&&e(t,"count")?new o(function(){var f=t|0,u=r;return new i(function(){u=r},function(t){var i=u++;return i<f&&t.yieldReturn(n(i))})}):new o(function(){var t=r;return new i(function(){t=r},function(i){return i.yieldReturn(n(t++))})})},o.unfold=function(n,t,u){return typeof u=="undefined"&&(u=!1),new o(function(){var o=r,f,e;return new i(function(){o=r;f=n;e=!u},function(n){var i=o++;return e?e=!1:f=t(f,i),n.yieldReturn(f)})})},o.defer=function(t){return new o(function(){var r;return new i(function(){r=t().getEnumerator()},function(n){return r.moveNext()&&n.yieldReturn(r.current)},function(){n.dispose(r)})})},o.forEach=function(t,i){n.Collections.Enumerable.forEach(t,i)},o.max=function(n){return n.takeUntil(function(n){return n==+Infinity},!0).aggregate(u.Greater)},o.min=function(n){return n.takeUntil(function(n){return n==-Infinity},!0).aggregate(u.Lesser)},o.prototype.assertIsNotDisposed=function(n){return typeof n=="undefined"&&(n="Enumerable was disposed."),t.prototype.assertIsNotDisposed.call(this,n)},o.prototype.forEach=function(n){var t=this,i;t.assertIsNotDisposed();i=r;w(t.getEnumerator(),function(r){while(t.assertIsNotDisposed()&&r.moveNext())if(n(r.current,i++)===!1)break})},o.prototype.toArray=function(n){var t=[];return n?this.where(n).toArray():(this.forEach(function(n,i){return t[i]=n}),t)},o.prototype.asEnumerable=function(){var n=this;return new o(function(){return n.getEnumerator()})},o.prototype.toLookup=function(n,t,i){typeof t=="undefined"&&(t=u.Identity);typeof i=="undefined"&&(i=u.Identity);var r=new h(i);return this.forEach(function(i){var u=n(i),f=t(i),e=r.get(u);e!==undefined?e.push(f):r.addByKeyValue(u,[f])}),new k(r)},o.prototype.toMap=function(n,t){var i={};return this.forEach(function(r){i[n(r)]=t(r)}),i},o.prototype.toDictionary=function(n,t,i){typeof i=="undefined"&&(i=u.Identity);var r=new h(i);return this.forEach(function(i){return r.addByKeyValue(n(i),t(i))}),r},o.prototype.toJoinedString=function(n,t){return typeof n=="undefined"&&(n=""),typeof t=="undefined"&&(t=u.Identity),this.select(t).toArray().join(n)},o.prototype.doAction=function(t){var e=this,u=!e.assertIsNotDisposed();return new o(function(){var o,s=r;return new i(function(){f(u);s=r;o=e.getEnumerator()},function(n){for(f(u);o.moveNext();){var i=t(o.current,s++);if(i===!1||i===nt)return n.yieldBreak();if(i!==2)return n.yieldReturn(o.current)}return!1},function(){n.dispose(o)})},function(){u=!0})},o.prototype.force=function(n){typeof n=="undefined"&&(n=0);this.assertIsNotDisposed();this.doAction(function(){return n})},o.prototype.skip=function(n){var t=this,i;return(t.assertIsNotDisposed(),!n||isNaN(n)||n<0)?t:isFinite(n)?(e(n,"count"),i=n|0,this.doAction(function(n,t){return t<i?2:1})):o.empty()},o.prototype.skipWhile=function(n){this.assertIsNotDisposed();var t=!0;return this.doAction(function(i,r){return t&&(t=n(i,r)),t?2:1})},o.prototype.take=function(n){var t,i;return!n||isNaN(n)||n<0?o.empty():(t=this,t.assertIsNotDisposed(),!isFinite(n))?t:(e(n,"count"),i=n|0,t.doAction(function(n,t){return t<i}))},o.prototype.takeWhile=function(n){return this.assertIsNotDisposed(),this.doAction(function(t,i){return n(t,i)?1:0})},o.prototype.takeUntil=function(n,t){if(this.assertIsNotDisposed(),!t)return this.doAction(function(t,i){return n(t,i)?0:1});var i=!1;return this.doAction(function(t,r){return i?0:(i=n(t,r),1)})},o.prototype.takeExceptLast=function(t){var r,u;return(typeof t=="undefined"&&(t=1),r=this,!t||isNaN(t)||t<=0)?r:isFinite(t)?(e(t,"count"),u=t|0,new o(function(){var t,f;return new i(function(){t=r.getEnumerator();f=[]},function(n){while(t.moveNext())if(f.push(t.current),f.length>u)return n.yieldReturn(f.shift());return!1},function(){n.dispose(t)})})):o.empty()},o.prototype.takeFromLast=function(n){if(!n||isNaN(n)||n<=0)return o.empty();var t=this;return isFinite(n)?(e(n,"count"),t.reverse().take(n|0)):t.reverse()},o.prototype.traverseBreadthFirst=function(t,u){var f=this;return new o(function(){var e,h=r,s;return new i(function(){h=r;s=[];e=f.getEnumerator()},function(n){for(;;){if(e.moveNext())return s.push(e.current),n.yieldReturn(u(e.current,h));var i=o.fromArray(s).selectMany(function(n){return t(n)});if(i.any())h++,s=[],e.dispose(),e=i.getEnumerator();else return!1}},function(){n.dispose(e)})})},o.prototype.traverseDepthFirst=function(t,r){var u=this;return new o(function(){var e=[],f;return new i(function(){f=u.getEnumerator()},function(n){for(;;){if(f.moveNext()){var i=r(f.current,e.length);return e.push(f),f=t(f.current).getEnumerator(),n.yieldReturn(i)}if(e.length==0)return!1;f.dispose();f=e.pop()}},function(){try{n.dispose(f)}finally{n.disposeThese(e)}})})},o.prototype.flatten=function(){var t=this;return new o(function(){var f,r=null;return new i(function(){f=t.getEnumerator()},function(n){for(;;){if(r!=null){if(r.moveNext())return n.yieldReturn(r.current);r=null}if(f.moveNext()){var t=f.current;if(t instanceof Array){r.dispose();r=o.fromArray(t).selectMany(u.Identity).flatten().getEnumerator();continue}else return n.yieldReturn(f.current)}return!1}},function(){n.dispose(f,r)})})},o.prototype.pairwise=function(t){var r=this;return new o(function(){var u;return new i(function(){u=r.getEnumerator();u.moveNext()},function(n){var i=u.current;return u.moveNext()&&n.yieldReturn(t(i,u.current))},function(){n.dispose(u)})})},o.prototype.scan=function(t,r){var u=r!==undefined,f=this;return new o(function(){var e,o,s;return new i(function(){e=f.getEnumerator();s=!0},function(n){return s?(s=!1,u?n.yieldReturn(o=r):e.moveNext()&&n.yieldReturn(o=e.current)):e.moveNext()?n.yieldReturn(o=t(o,e.current)):!1},function(){n.dispose(e)})})},o.prototype.select=function(t){var u=this,e=!u.assertIsNotDisposed();return t.length<2?new v(u,null,t):new o(function(){var o,s=r;return new i(function(){f(e);s=r;o=u.getEnumerator()},function(n){return f(e),o.moveNext()?n.yieldReturn(t(o.current,s++)):!1},function(){n.dispose(o)})},function(){e=!0})},o.prototype.selectMany=function(t,u){var f=this;return u||(u=function(n,t){return t}),new o(function(){var o,e,s=r;return new i(function(){o=f.getEnumerator();e=undefined;s=r},function(i){if(e===undefined&&!o.moveNext())return!1;do{if(!e){var r=t(o.current,s++);if(!r)continue;e=n.Collections.Enumerator.from(r)}if(e.moveNext())return i.yieldReturn(u(o.current,e.current));e.dispose();e=null}while(o.moveNext());return!1},function(){n.dispose(o,e);o=null;e=null})})},o.prototype.choose=function(t){var e=this,u=!e.assertIsNotDisposed();return new o(function(){var o,s=r;return new i(function(){f(u);s=r;o=e.getEnumerator()},function(n){for(f(u);o.moveNext();){var i=t(o.current,s++);if(i!==null&&i!==undefined)return n.yieldReturn(i)}return!1},function(){n.dispose(o)})},function(){u=!0})},o.prototype.where=function(t){var u=this,e=!u.assertIsNotDisposed();return t.length<2?new a(u,t):new o(function(){var o,s=r;return new i(function(){f(e);s=r;o=u.getEnumerator()},function(n){for(f(e);o.moveNext();)if(t(o.current,s++))return n.yieldReturn(o.current);return!1},function(){n.dispose(o)})},function(){e=!0})},o.prototype.ofType=function(n){var t;switch(n){case Number:t=s.Number;break;case String:t=s.String;break;case Boolean:t=s.Boolean;break;case Function:t=s.Function;break;default:t=null}return t===null?this.where(function(t){return t instanceof n}):this.where(function(n){return typeof n===t})},o.prototype.except=function(t,r){var e=this,u=!e.assertIsNotDisposed();return new o(function(){var h,s;return new i(function(){f(u);h=e.getEnumerator();s=new n.Collections.Dictionary(r);t&&o.forEach(t,function(n){return s.addByKeyValue(n,!0)})},function(n){for(f(u);h.moveNext();){var t=h.current;if(!s.containsKey(t))return s.addByKeyValue(t,!0),n.yieldReturn(t)}return!1},function(){n.dispose(h);s.clear()})},function(){u=!0})},o.prototype.distinct=function(n){return this.except(null,n)},o.prototype.distinctUntilChanged=function(t){var u=this,r=!u.assertIsNotDisposed();return new o(function(){var e,o,s=!0;return new i(function(){f(r);e=u.getEnumerator()},function(n){for(f(r);e.moveNext();){var i=t(e.current);if(s)s=!1;else if(o===i)continue;return o=i,n.yieldReturn(e.current)}return!1},function(){n.dispose(e)})},function(){r=!0})},o.prototype.reverse=function(){var n=this,t=!n.assertIsNotDisposed();return new o(function(){var u,e=r;return new i(function(){f(t);u=n.toArray();e=u.length|0},function(n){return e>r&&n.yieldReturn(u[--e])},function(){u.length=0})},function(){t=!0})},o.prototype.shuffle=function(){var n=this,t=!n.assertIsNotDisposed();return new o(function(){var r;return new i(function(){f(t);r=n.toArray()},function(n){var t=r.length;return t&&n.yieldReturn(r.splice(Math.random()*t|0,g)[0])},function(){r.length=0})},function(){t=!0})},o.prototype.count=function(n){var i=this,t;return i.assertIsNotDisposed(),t=r,n?i.forEach(function(i,r){n(i,r)&&++t}):i.forEach(function(){++t}),t},o.prototype.all=function(n){var t=!0;return this.forEach(function(i){if(!n(i))return t=!1,!1}),t},o.prototype.every=function(n){return this.all(n)},o.prototype.any=function(n){var t=!1;return n?this.forEach(function(i){return t=n(i),!t}):this.forEach(function(){return t=!0,!1}),t},o.prototype.some=function(n){return this.any(n)},o.prototype.isEmpty=function(){return!this.any()},o.prototype.contains=function(n,t){return t?this.any(function(i){return t(i)===t(n)}):this.any(function(t){return t===n})},o.prototype.indexOf=function(t,i){var r=d;return i?this.forEach(function(u,f){if(n.areEqual(i(u),i(t),!0))return r=f,!1}):this.forEach(function(i,u){if(n.areEqual(i,t,!0))return r=u,!1}),r},o.prototype.lastIndexOf=function(t,i){var r=d;return i?this.forEach(function(u,f){n.areEqual(i(u),i(t),!0)&&(r=f)}):this.forEach(function(i,u){n.areEqual(i,t,!0)&&(r=u)}),r},o.prototype.defaultIfEmpty=function(t){typeof t=="undefined"&&(t=null);var r=this,u=!r.assertIsNotDisposed();return new o(function(){var e,o;return new i(function(){o=!0;f(u);e=r.getEnumerator()},function(n){return(f(u),e.moveNext())?(o=!1,n.yieldReturn(e.current)):o?(o=!1,n.yieldReturn(t)):!1},function(){n.dispose(e)})})},o.prototype.zip=function(t,u){var f=this;return new o(function(){var e,o,s=r;return new i(function(){s=r;e=f.getEnumerator();o=c(t)},function(n){return e.moveNext()&&o.moveNext()&&n.yieldReturn(u(e.current,o.current,s++))},function(){n.dispose(e,o)})})},o.prototype.zipMultiple=function(t,u){var f=this;return t.length?new o(function(){var s,o,e,h=r;return new i(function(){s=t.slice();h=r;o=f.getEnumerator();e=null},function(n){if(o.moveNext())for(;;){while(!e){var t=s.shift();if(t)e=c(t);else if(!s.length)return n.yieldBreak()}if(e.moveNext())return n.yieldReturn(u(o.current,e.current,h++));e.dispose();e=null}return n.yieldBreak()},function(){n.dispose(o)})}):o.empty()},o.prototype.join=function(t,f,e,s,h){typeof h=="undefined"&&(h=u.Identity);var c=this;return new o(function(){var l,v,a=null,y=r;return new i(function(){l=c.getEnumerator();v=o.from(t).toLookup(e,u.Identity,h)},function(n){for(var t,i;;){if(a!=null){if(t=a[y++],t!==undefined)return n.yieldReturn(s(l.current,t));t=null;y=r}if(l.moveNext())i=f(l.current),a=v.get(i);else return n.yieldBreak()}},function(){n.dispose(l)})})},o.prototype.groupJoin=function(t,r,f,e,s){typeof s=="undefined"&&(s=u.Identity);var h=this;return new o(function(){var c,l=null;return new i(function(){c=h.getEnumerator();l=o.from(t).toLookup(f,u.Identity,s)},function(n){return c.moveNext()&&n.yieldReturn(e(c.current,l.get(r(c.current))))},function(){n.dispose(c)})})},o.prototype.concatWith=function(t){var r=this;return new o(function(){var u,f;return new i(function(){u=r.getEnumerator()},function(n){if(u!=null){if(u.moveNext())return n.yieldReturn(u.current);f=c(t);u.dispose();u=null}return f.moveNext()?n.yieldReturn(f.current):!1},function(){n.dispose(u,f)})})},o.prototype.merge=function(n){var t=this;return n.length?n.length==1?t.concatWith(n[0]):(n=n.slice(),new o(function(){var r;return new i(function(){r=t.getEnumerator()},function(t){for(;;){while(!r&&n.length)r=c(n.shift());if(r&&r.moveNext())return t.yieldReturn(r.current);if(r){r.dispose();r=null;continue}return t.yieldBreak()}})})):t},o.prototype.concat=function(){for(var i,n=[],t=0;t<arguments.length-0;t++)n[t]=arguments[t+0];return(i=this,n.length==0)?i:n.length==1?i.concatWith(n[0]):i.merge(n)},o.prototype.insertAt=function(t,u){if(isNaN(t)||t<0||!isFinite(t))throw new Error("'index' is invalid or out of bounds.");e(t,"index");var s=t|0,f=this;return f.assertIsNotDisposed(),new o(function(){var e,t,o=r,h=!1;return new i(function(){o=r;e=f.getEnumerator();t=c(u);h=!1},function(n){return o==s&&(h=!0,t.moveNext())?n.yieldReturn(t.current):e.moveNext()?(o++,n.yieldReturn(e.current)):!h&&t.moveNext()&&n.yieldReturn(t.current)},function(){n.dispose(e,t)})})},o.prototype.alternateMultiple=function(t){var r=this;return new o(function(){var s,e,u,f;return new i(function(){f=new n.Collections.ArrayEnumerator(o.toArray(t));u=r.getEnumerator();var i=u.moveNext();e=i?1:0;i&&(s=u.current)},function(n){switch(e){case 0:return n.yieldBreak();case 2:if(f.moveNext())return n.yieldReturn(f.current);f.reset();e=1}var i=s,t=u.moveNext();return e=t?2:0,t&&(s=u.current),n.yieldReturn(i)},function(){n.dispose(u,f)})})},o.prototype.alternateSingle=function(n){return this.alternateMultiple(o.make(n))},o.prototype.alternate=function(){for(var t=[],n=0;n<arguments.length-0;n++)t[n]=arguments[n+0];return this.alternateMultiple(t)},o.prototype.intersect=function(t,r){var u=this;return new o(function(){var f,e,s;return new i(function(){f=u.getEnumerator();e=new h(r);s=new h(r);o.from(t).forEach(function(n){e.addByKeyValue(n,!0)})},function(n){while(f.moveNext()){var t=f.current;if(!s.containsKey(t)&&e.containsKey(t))return s.addByKeyValue(t,!0),n.yieldReturn(t)}return n.yieldBreak()},function(){n.dispose(f)})})},o.prototype.sequenceEqual=function(t,i){return typeof i=="undefined"&&(i=n.areEqual),w(this.getEnumerator(),function(n){return w(o.from(t).getEnumerator(),function(t){while(n.moveNext())if(!t.moveNext()||!i(n.current,t.current))return!1;return!t.moveNext()})})},o.prototype.union=function(t,r){typeof r=="undefined"&&(r=u.Identity);var f=this;return new o(function(){var s,u,e;return new i(function(){s=f.getEnumerator();e=new h(r)},function(n){var i;if(u===undefined){while(s.moveNext())if(i=s.current,!e.containsKey(i))return e.addByKeyValue(i,null),n.yieldReturn(i);u=o.from(t).getEnumerator()}while(u.moveNext())if(i=u.current,!e.containsKey(i))return e.addByKeyValue(i,null),n.yieldReturn(i);return!1},function(){n.dispose(s,u)})})},o.prototype.orderBy=function(n){return typeof n=="undefined"&&(n=u.Identity),new y(this,n,!1)},o.prototype.orderByDescending=function(n){return typeof n=="undefined"&&(n=u.Identity),new y(this,n,!0)},o.prototype.groupBy=function(n,t,i){typeof t=="undefined"&&(t=u.Identity);var r=this;return new o(function(){return r.toLookup(n,t,i).getEnumerator()})},o.prototype.partitionBy=function(t,r,f,e){typeof r=="undefined"&&(r=u.Identity);typeof f=="undefined"&&(f=function(n,t){return new p(n,t)});typeof e=="undefined"&&(e=u.Identity);var s=this;return new o(function(){var u,h,c,o=[];return new i(function(){u=s.getEnumerator();u.moveNext()&&(h=t(u.current),c=e(h),o.push(r(u.current)))},function(n){for(var i,s;i=u.moveNext();)if(c===e(t(u.current)))o.push(r(u.current));else break;return o.length?(s=f(h,o),i?(h=t(u.current),c=e(h),o=[r(u.current)]):o=[],n.yieldReturn(s)):!1},function(){n.dispose(u)})})},o.prototype.buffer=function(t){if(t<1||!isFinite(t))throw new Error("Invalid buffer size.");e(t,"size");var r=this;return new o(function(){var u;return new i(function(){u=r.getEnumerator()},function(n){for(var i=[];i.length<t&&u.moveNext;)i.push(u.current);return i.length&&n.yieldReturn(i)},function(){n.dispose(u)})})},o.prototype.aggregate=function(n,t){return this.scan(n,t).lastOrDefault()},o.prototype.average=function(n){typeof n=="undefined"&&(n=b);var t=0,i=0,r=0;return(this.forEach(function(u){var f=n(u);if(!isNaN(f))return t=NaN,!1;isFinite(f)?t+=f:i+=f>0?1:-1;++r}),i)?i*Infinity:isNaN(t)||!r?NaN:t/r},o.prototype.max=function(){return this.aggregate(u.Greater)},o.prototype.min=function(){return this.aggregate(u.Lesser)},o.prototype.maxBy=function(n){return typeof n=="undefined"&&(n=u.Identity),this.aggregate(function(t,i){return n(t)>n(i)?t:i})},o.prototype.minBy=function(n){return typeof n=="undefined"&&(n=u.Identity),this.aggregate(function(t,i){return n(t)<n(i)?t:i})},o.prototype.sum=function(n){typeof n=="undefined"&&(n=b);var t=0,i=0;return this.forEach(function(r){var u=n(r);if(!isNaN(u))return t=NaN,!1;isFinite(u)?t+=u:i+=u>0?1:-1}),isNaN(t)?NaN:i?t:i*Infinity},o.prototype.product=function(n){typeof n=="undefined"&&(n=b);var t=1,i=!1;return this.forEach(function(r){i=!0;var u=n(r);if(!isNaN(u))return t=NaN,!1;t*=u}),i&&isNaN(t)?NaN:t},o.prototype.elementAt=function(n){var r,t,u,i;if(isNaN(n)||n<0||!isFinite(n))throw new Error("'index' is invalid or out of bounds.");if(e(n,"index"),r=n|0,t=this,t.assertIsNotDisposed(),i=!1,t.forEach(function(n,t){if(t==r)return u=n,i=!0,!1}),!i)throw new Error("index is less than 0 or greater than or equal to the number of elements in source.");return u},o.prototype.elementAtOrDefault=function(n,t){var u,i,f,r;if(typeof t=="undefined"&&(t=null),isNaN(n)||n<0||!isFinite(n))throw new Error("'index' is invalid or out of bounds.");return e(n,"index"),u=n|0,i=this,i.assertIsNotDisposed(),r=!1,i.forEach(function(n,t){if(t==u)return f=n,r=!0,!1}),r?f:t},o.prototype.first=function(){var t=this,i,n;if(t.assertIsNotDisposed(),n=!1,t.forEach(function(t){return i=t,n=!0,!1}),!n)throw new Error("first:No element satisfies the condition.");return i},o.prototype.firstOrDefault=function(n){var t,r,i;return typeof n=="undefined"&&(n=null),t=this,t.assertIsNotDisposed(),i=!1,t.forEach(function(n){return r=n,i=!0,!1}),i?r:n},o.prototype.last=function(){var t=this,i,n;if(t.assertIsNotDisposed(),n=!1,t.forEach(function(t){n=!0;i=t}),!n)throw new Error("last:No element satisfies the condition.");return i},o.prototype.lastOrDefault=function(n){var t,r,i;return typeof n=="undefined"&&(n=null),t=this,t.assertIsNotDisposed(),i=!1,t.forEach(function(n){i=!0;r=n}),i?r:n},o.prototype.single=function(){var t=this,i,n;if(t.assertIsNotDisposed(),n=!1,t.forEach(function(t){if(n)throw new Error("single:sequence contains more than one element.");else n=!0,i=t}),!n)throw new Error("single:No element satisfies the condition.");return i},o.prototype.singleOrDefault=function(n){var i,r,t;return typeof n=="undefined"&&(n=null),i=this,i.assertIsNotDisposed(),t=!1,i.forEach(function(n){if(t)throw new Error("single:sequence contains more than one element.");else t=!0,r=n}),t?r:n},o.prototype.share=function(){var r=this,t;return r.assertIsNotDisposed(),new o(function(){return new i(function(){t||(t=r.getEnumerator())},function(n){return t.moveNext()&&n.yieldReturn(t.current)})},function(){n.dispose(t)})},o.prototype.memoize=function(){var u=this,t=!u.assertIsNotDisposed(),n;return new o(function(){var e,o=r;return new i(function(){f(t);e||(e=u.getEnumerator());n||(n=[]);o=r},function(i){f(t);var r=o++;return r>=n.length?e.moveNext()?i.yieldReturn(n[r]=e.current):!1:i.yieldReturn(n[r])})},function(){t=!0;n&&(n.length=0);n=null})},o.prototype.catchError=function(t){var r=this,u=!r.assertIsNotDisposed();return new o(function(){var e;return new i(function(){try{f(u);e=r.getEnumerator()}catch(n){}},function(n){try{if(f(u),e.moveNext())return n.yieldReturn(e.current)}catch(i){t(i)}return!1},function(){n.dispose(e)})})},o.prototype.finallyAction=function(t){var r=this,u=!r.assertIsNotDisposed();return new o(function(){var e;return new i(function(){f(u);e=r.getEnumerator()},function(n){return f(u),e.moveNext()?n.yieldReturn(e.current):!1},function(){try{n.dispose(e)}finally{t()}})})},o}(n.DisposableBase);t.Enumerable=o;l=function(t){function i(i){var r=this;r._source=i;t.call(this,function(){return r.assertIsNotDisposed(),new n.Collections.ArrayEnumerator(function(){return r.assertIsNotDisposed("The underlying ArrayEnumerable was disposed."),r._source})})}return __extends(i,t),i.prototype._onDispose=function(){t.prototype._onDispose.call(this);this._source=null},Object.defineProperty(i.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),i.prototype.toArray=function(){var n=this.source,i,u,t;if(!n)return[];if(n instanceof Array)return n.slice();for(i=n.length,u=new Array(i),t=r;t<i;++t)u[t]=n[t];return u},i.prototype.asEnumerable=function(){return new i(this._source)},i.prototype.forEach=function(n){var u=this,i,t;if(u.assertIsNotDisposed(),i=u._source,i)for(t=r;t<i.length;++t)if(n(i[t],t)===!1)break},i.prototype.any=function(n){var r=this,i,u;return r.assertIsNotDisposed(),i=r._source,u=i?i.length:0,u&&(!n||t.prototype.any.call(this,n))},i.prototype.count=function(n){var u=this,i,r;return u.assertIsNotDisposed(),i=u._source,r=i?i.length:0,r&&(n?t.prototype.count.call(this,n):r)},i.prototype.elementAt=function(n){var r=this,i;return r.assertIsNotDisposed(),i=r._source,n<i.length&&n>=0?i[n]:t.prototype.elementAt.call(this,n)},i.prototype.elementAtOrDefault=function(n,t){var i,r;return typeof t=="undefined"&&(t=null),i=this,i.assertIsNotDisposed(),r=i._source,n<r.length&&n>=0?r[n]:t},i.prototype.first=function(){var i=this,n;return i.assertIsNotDisposed(),n=i._source,n&&n.length?n[0]:t.prototype.first.call(this)},i.prototype.firstOrDefault=function(n){var i,t;return typeof n=="undefined"&&(n=null),i=this,i.assertIsNotDisposed(),t=i._source,t&&t.length?t[0]:n},i.prototype.last=function(){var r=this,n,i;return r.assertIsNotDisposed(),n=r._source,i=n.length,i?n[i-1]:t.prototype.last.call(this)},i.prototype.lastOrDefault=function(n){var t,i,r;return typeof n=="undefined"&&(n=null),t=this,t.assertIsNotDisposed(),i=t._source,r=i.length,r?i[r-1]:n},i.prototype.skip=function(t){var i=this;return!t||t<0?i.asEnumerable():new o(function(){return new n.Collections.ArrayEnumerator(function(){return i._source},t)})},i.prototype.takeExceptLast=function(n){typeof n=="undefined"&&(n=1);var t=this,i=t._source?t._source.length:0;return t.take(i-n)},i.prototype.takeFromLast=function(n){if(!n||n<0)return o.empty();var t=this,i=t._source?t._source.length:0;return t.skip(i-n)},i.prototype.reverse=function(){var t=this;return new o(function(){return new n.Collections.ArrayEnumerator(function(){return t._source},t._source?t._source.length-1:0,-1)})},i.prototype.memoize=function(){return new i(this._source)},i.prototype.sequenceEqual=function(r,u){return(typeof u=="undefined"&&(u=n.areEqual),r instanceof Array)?it.areEqual(this.source,r,!0,u):r instanceof i?r.sequenceEqual(this.source,u):t.prototype.sequenceEqual.call(this,r,u)},i.prototype.toJoinedString=function(n,i){typeof n=="undefined"&&(n="");typeof i=="undefined"&&(i=u.Identity);var r=this._source;return!i&&r instanceof Array?r.join(n):t.prototype.toJoinedString.call(this,n,i)},i}(o);t.ArrayEnumerable=l;a=function(t){function i(n,i){t.call(this,null);this.prevSource=n;this.prevPredicate=i}return __extends(i,t),i.prototype.where=function(n){if(n.length>1)return t.prototype.where.call(this,n);var r=this.prevPredicate,u=function(t){return r(t)&&n(t)};return new i(this.prevSource,u)},i.prototype.select=function(n){return n.length>1?t.prototype.select.call(this,n):new v(this.prevSource,this.prevPredicate,n)},i.prototype.getEnumerator=function(){var i=this.prevPredicate,r=this.prevSource,t;return new n.Collections.EnumeratorBase(function(){t=r.getEnumerator()},function(n){while(t.moveNext())if(i(t.current))return n.yieldReturn(t.current);return!1},function(){n.dispose(t)})},i.prototype._onDispose=function(){t.prototype._onDispose.call(this);this.prevPredicate=null;this.prevSource=null},i}(o);t.WhereEnumerable=a;v=function(t){function r(n,i,r){t.call(this,null);this.prevSource=n;this.prevPredicate=i;this.prevSelector=r}return __extends(r,t),r.prototype.where=function(n){return n.length>1?t.prototype.where.call(this,n):new a(this,n)},r.prototype.select=function(n){if(n.length>1)return t.prototype.select.call(this,n);var i=this,u=i.prevSelector,f=function(t){return n(u(t))};return new r(i.prevSource,i.prevPredicate,f)},r.prototype.getEnumerator=function(){var r=this,u=r.prevPredicate,f=r.prevSource,e=r.prevSelector,t;return new i(function(){t=f.getEnumerator()},function(n){while(t.moveNext()){var i=t.current;if(u==null||u(i))return n.yieldReturn(e(i))}return!1},function(){n.dispose(t)})},r.prototype._onDispose=function(){var n=this;t.prototype._onDispose.call(this);n.prevPredicate=null;n.prevSource=null;n.prevSelector=null},r}(o);t.WhereSelectEnumerable=v;y=function(t){function i(n,i,r,u){t.call(this,null);this.source=n;this.keySelector=i;this.descending=r;this.parent=u}return __extends(i,t),i.prototype.createOrderedEnumerable=function(n,t){return new i(this.source,n,t,this)},i.prototype.thenBy=function(n){return this.createOrderedEnumerable(n,!1)},i.prototype.thenByDescending=function(n){return this.createOrderedEnumerable(n,!0)},i.prototype.getEnumerator=function(){var u=this,i,t,f=r;return new n.Collections.EnumeratorBase(function(){i=[];t=[];o.forEach(u.source,function(n,r){i.push(n);t.push(r)});var n=tt.create(u);n.generateKeys(i);t.sort(function(t,i){return n.compare(t,i)})},function(n){return f<t.length?n.yieldReturn(i[t[f++]]):!1},function(){i&&(i.length=0);i=null;t&&(t.length=0);t=null})},i.prototype._onDispose=function(){t.prototype._onDispose.call(this);this.source=null;this.keySelector=null;this.descending=null;this.parent=null},i}(o);t.OrderedEnumerable=y;tt=function(){function t(n,t,i){this.keySelector=n;this.descending=t;this.child=i;this.keys=null}return t.create=function(n,i){typeof i=="undefined"&&(i=null);var r=new t(n.keySelector,n.descending,i);return n.parent?t.create(n.parent,r):r},t.prototype.generateKeys=function(n){for(var t=this,u=n.length|0,e=t.keySelector,f=new Array(u),i=r;i<u;++i)f[i]=e(n[i]);t.keys=f;t.child&&t.child.generateKeys(n)},t.prototype.compare=function(t,i){var r=this,e=r.keys,u=n.compare(e[t],e[i]),f;return u==0?(f=r.child,f?f.compare(t,i):n.compare(t,i)):r.descending?-u:u},t}();k=function(){function t(n){this._dictionary=n}return Object.defineProperty(t.prototype,"count",{get:function(){return this._dictionary.count},enumerable:!0,configurable:!0}),t.prototype.get=function(n){return this._dictionary.get(n)},t.prototype.contains=function(n){return this._dictionary.containsKey(n)},t.prototype.getEnumerator=function(){var i=this,t;return new n.Collections.EnumeratorBase(function(){t=i._dictionary.getEnumerator()},function(n){if(!t.moveNext())return!1;var i=t.current;return n.yieldReturn(new p(i.key,i.value))},function(){n.dispose(t)})},t}();t.Lookup=k;p=function(n){function t(t,i){n.call(this,i);this._groupKey=t}return __extends(t,n),Object.defineProperty(t.prototype,"key",{get:function(){return this._groupKey},enumerable:!0,configurable:!0}),t}(l);t.Grouping=p})(n.Linq||(n.Linq={}));var t=n.Linq})(System||(System={}));
/*
//# sourceMappingURL=System.Linq.min.js.map
*/