var __extends,LinkedList,System;(function(n){"use strict";var i=function(){function n(){}return n.prototype.Identity=function(n){return n},n.prototype.True=function(){return!0},n.prototype.False=function(){return!1},n.prototype.Blank=function(){},Object.defineProperty(n,"Identity",{get:function(){return t.Identity},enumerable:!0,configurable:!0}),Object.defineProperty(n,"True",{get:function(){return t.True},enumerable:!0,configurable:!0}),Object.defineProperty(n,"False",{get:function(){return t.False},enumerable:!0,configurable:!0}),Object.defineProperty(n,"Blank",{get:function(){return t.Blank},enumerable:!0,configurable:!0}),n}(),t;n.Functions=i;t=new i})(System||(System={})),function(n){"use strict";var t=function(){function t(){this.Boolean="boolean";this.Number="number";this.String="string";this.Object="object";this.Null="object";this.Undefined=typeof undefined;this.Function=typeof n.Functions.Blank}return Object.defineProperty(t,"Boolean",{get:function(){return"boolean"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Number",{get:function(){return"number"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"String",{get:function(){return"string"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Object",{get:function(){return"object"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Null",{get:function(){return"object"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Undefined",{get:function(){return typeof undefined},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Function",{get:function(){return typeof n.Functions.Blank},enumerable:!0,configurable:!0}),t.prototype.isBoolean=function(n){return typeof n===this.Boolean},t.isBoolean=function(n){return typeof n===t.Boolean},t.prototype.isNumber=function(n){return typeof n===this.Number},t.isNumber=function(n){return typeof n===t.Number},t.prototype.isString=function(n){return typeof n===this.String},t.isString=function(n){return typeof n===t.String},t.prototype.isFunction=function(n){return typeof n===this.Function},t.isFunction=function(n){return typeof n===t.Function},t}();n.Types=t}(System||(System={})),function(n){function i(n){return typeof n===t.Number&&isNaN(n)}function u(n,t,r){return typeof r=="undefined"&&(r=!0),n===t||!r&&n==t||i(n)&&i(t)}function f(n,t,i){return(typeof i=="undefined"&&(i=!0),u(n,t,i))?0:n>t?1:t<n?-1:NaN}function r(n,i){var u,f,e;if(typeof i=="undefined"&&(i=0),i<0)return n;switch(typeof n){case t.Undefined:case t.Null:case t.String:case t.Boolean:case t.Number:case t.Function:return n}if(n instanceof Array){if(u=n.slice(),i>0)for(f=0;f<u.length;f++)f in u&&(u[f]=r(u[f],i-1))}else if(u={},i>0)for(e in n)u[e]=r(n[e],i-1);return u}function e(n,t){for(var i in n)t[i]=n[i]}function o(n,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(i){n.prototype[i]=t.prototype[i]})})}var t=new n.Types;n.isEqualToNaN=i;n.areEqual=u;n.compare=f;n.clone=r;n.copyTo=e;n.applyMixins=o}(System||(System={})),function(n){(function(n){function t(n){for(var t,r=[],i=0;i<arguments.length-1;i++)r[i]=arguments[i+1];for(t=0;t<r.length;t++)n=n.replace("{"+t+"}",r[t]);return n}n.format=t})(n.Text||(n.Text={}));var t=n.Text}(System||(System={}));__extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},function(n){(function(t){"use strict";var e=function(){function n(){}return Object.defineProperty(n.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),n.prototype.yieldReturn=function(n){return this._current=n,!0},n.prototype.yieldBreak=function(){return this._current=null,!1},n}(),f,o,r,i,u;(function(n){n[n.Before=0]="Before";n[n.Running=1]="Running";n[n.After=2]="After"})(f||(f={})),function(t){function r(t){if(t instanceof Array)return new u(t);if(typeof t===n.Types.Object&&"length"in t)return new i(function(){return{source:t,length:t.length,pointer:0,step:1}});if("getEnumerator"in t)return t.getEnumerator();throw new Error("Unknown enumerable.");}function f(n,t){if(n)for(var i=0;n.moveNext();)if(t(n.current,i++)===!1)break}t.from=r;t.forEach=f}(t.Enumerator||(t.Enumerator={}));o=t.Enumerator;r=function(n){function t(t,i,r){n.call(this);this.initializer=t;this.tryGetNext=i;this.disposer=r;this.reset()}return __extends(t,n),Object.defineProperty(t.prototype,"current",{get:function(){return this._yielder.current},enumerable:!0,configurable:!0}),t.prototype.reset=function(){var n=this;n._yielder=new e;n._state=0},t.prototype.moveNext=function(){var n=this,t;try{switch(n._state){case 0:n._state=1;t=n.initializer;t&&t();case 1:return n.tryGetNext(n._yielder)?!0:(this.dispose(),!1);case 2:return!1}}catch(i){this.dispose();throw i;}},t.prototype._onDispose=function(){var n=this,i=n.disposer,t;n.initializer=null;n.disposer=null;t=n._yielder;n._yielder=null;t&&t.yieldBreak();try{i&&i()}finally{this._state=2}},t}(n.DisposableBase);t.EnumeratorBase=r;i=function(n){function t(t){var i;n.call(this,function(){var n,r;if(i=t(),i&&i.source){if(i.length&&i.step===0)throw new Error("Invalid IndexEnumerator step value (0).");if(n=i.pointer,n){if(n!=Math.floor(n))throw new Error("Invalid IndexEnumerator pointer value ("+n+") has decimal.");}else i.pointer=0;if(i.pointer=n|0,r=i.step,r){if(r!=Math.floor(r))throw new Error("Invalid IndexEnumerator step value ("+r+") has decimal.");}else i.step=1;i.step=r|0}},function(n){var r=i&&i.source?i.length:0,t;return r?(t=i.pointer|0,i.pointer+=i.step,t<r&&t>=0?n.yieldReturn(i.source[t]):n.yieldBreak()):n.yieldBreak()},function(){i&&(i.source=null)})}return __extends(t,n),t}(r);t.IndexEnumerator=i;u=function(t){function i(i,r,u){typeof r=="undefined"&&(r=0);typeof u=="undefined"&&(u=1);t.call(this,function(){var t=n.Types.isFunction(i)?i():i;return{source:t,pointer:r,length:t?t.length:0,step:u}})}return __extends(i,t),i}(i);t.ArrayEnumerator=u})(n.Collections||(n.Collections={}));var t=n.Collections}(System||(System={})),function(n){(function(t){(function(t){function f(n){var t;return n>65536?t=new Array(n):(t=[],t.length=n),t}function e(n){return n?n.slice():n}function i(n,t){return n?n.indexOf(t)!=-1:!1}function o(n,t,i,r){var f=0,u;if(r!==0)for(r||(r=Infinity),u=n.length-1|0;u>=0;--u)if(n[u]===t&&(n[u]=i,++f,!--r))break;return f}function s(n,t){if(!n)throw new Error("ArgumentNullException: 'array' cannot be null.");var r=n.length,u=!r||!i(n,t);return u&&(n[r]=t),u}function h(n,t){var r,i;if(!n)throw new Error("ArgumentNullException: 'array' cannot be null.");for(r=n.length|0,i=0;i<r;++i)if(i in n&&t(n[i]))return i;return-1}function c(n,t){var u,i,f;if(!n)throw new Error("ArgumentNullException: 'arrays' cannot be null.");if(n.length<2)throw new Error("Cannot compare a set of arrays less than 2.");for(u=n[0],i=0,f=n.length|0;i<f;++i)if(!r(u,n[i],t))return!1;return!0}function r(t,i,r,u){var e,f;if(typeof u=="undefined"&&(u=n.areEqual),t===i)return!0;if(e=t.length|0,e!=(i.length|0))return!1;for(f=0;f<e;++f)if(!u(t[f],i[f],r))return!1;return!0}function l(n,t){if(!n)throw new Error("ArgumentNullException: 'target' cannot be null.");if(t)for(var i=0;i<n.length;++i)n[i]=t(n[i]);return n}function a(n,t){if(!n)throw new Error("ArgumentNullException: 'array' cannot be null.");var i=t<n.length;return i&&n.splice(t,1),i}function v(n,t,i){var u,r;if(!n)throw new Error("ArgumentNullException: 'array' cannot be null.");if(u=0,n&&n.length&&i!==0)for(i||(i=Infinity),r=n.length-1|0;r>=0;--r)if(n[r]===t&&(n.splice(r,1),++u,!--i))break;return u}function y(n,t){for(var i=[];t--;)i.push(n);return i}function p(n,t){if(typeof t=="undefined"&&(t=!1),!n||!n.length)return 0;var i=0;return t?n.forEach(function(n){isNaN(n)||(i+=n)}):n.every(function(n){return i+=n,!isNaN(i)}),i}function w(n,t){if(typeof t=="undefined"&&(t=!1),!n||!n.length)return NaN;var i=0,r;return t?(r=0,n.forEach(function(n){isNaN(n)||(i+=n,r++)})):(r=n.length,n.every(function(n){return i+=n,!isNaN(i)})),!r||isNaN(i)?NaN:i/r}function b(n,t){var i,r;return(typeof t=="undefined"&&(t=!1),!n||!n.length)?NaN:(i=1,t?(r=!1,n.forEach(function(n){isNaN(n)||(i*=n,r||(r=!0))}),r||(i=NaN)):n.every(function(n){return isNaN(n)?(i=NaN,!1):(i*=n,!0)}),i)}function u(n,t,i,r){var u,f;return!n||!n.length?NaN:(u=t,i?(f=!1,n.forEach(function(n){isNaN(n)||(r(n,u)&&(u=n),f||(f=!0))}),f||(u=NaN)):n.every(function(n){return isNaN(n)?(u=NaN,!1):(r(n,u)&&(u=n),!0)}),u)}function k(n,t){return typeof t=="undefined"&&(t=!1),u(n,+Infinity,t,function(n,t){return n<t})}function d(n,t){return typeof t=="undefined"&&(t=!1),u(n,-Infinity,t,function(n,t){return n>t})}t.initialize=f;t.copy=e;t.contains=i;t.replace=o;t.register=s;t.findIndex=h;t.areAllEqual=c;t.areEqual=r;t.applyTo=l;t.removeIndex=a;t.remove=v;t.repeat=y;t.sum=p;t.average=w;t.product=b;t.min=k;t.max=d})(t.ArrayUtility||(t.ArrayUtility={}));var i=t.ArrayUtility})(n.Collections||(n.Collections={}));var t=n.Collections}(System||(System={})),function(n){(function(t){function u(n,t){if(!n)return null;var i=n.external;return i||(n.external=i=new o(t,n)),i}function f(n,t){if(!n)throw new Error("ArgumentNullException: 'node' cannot be null.");if(n.list!=t)throw new Error("InvalidOperationException: provided node does not belong to this list.");var i=n._node;if(!i)throw new Error("InvalidOperationException: provided node is not valid.");return i}var e=0,i=1,r=function(){function n(n,t,i){this.value=n;this.prev=t;this.next=i}return n.prototype.assertDetached=function(){if(this.next||this.prev)throw new Error("InvalidOperationException: adding a node that is already placed.");},n}(),s=function(){function o(n){var f=this,o=e,s=null,i=null,u=t.Enumerator.from(n);for(u.moveNext()&&(s=i=new r(u.current),++o);u.moveNext();)i=i.next=new r(u.current,i),++o;f._first=s;f._last=i;f._count=o}return o.prototype._addFirst=function(n){var t=this,u=t._first,f=new r(n,null,u);return u?(u.prev=f,u=f):t._first=t._last=f,t._count+=i,f},o.prototype._addLast=function(n){var t=this,u=t._last,f=new r(n,u);return u?(u.next=f,u=f):t._first=t._last=f,t._count+=i,f},o.prototype._addNodeBefore=function(n,t){t.assertDetached();t.next=n;t.prev=n.prev;n.prev.next=t;n.prev=t;this._count+=i},o.prototype._addNodeAfter=function(n,t){t.assertDetached();t.prev=n;t.next=n.next;n.next.prev=t;n.next=t;this._count+=i},o.prototype._findFirst=function(t){for(var r=n.areEqual,i=this._first;i;){if(r(t,i.value))return i;i=i.next}return null},o.prototype._findLast=function(t){for(var r=n.areEqual,i=this._last;i;){if(r(t,i.value))return i;i=i.prev}return null},o.prototype.forEach=function(n){for(var t=this._first,i=e;t&&n(t.value,i++)!==!1;)t=t.next},o.prototype.getEnumerator=function(){var i=this,n;return new t.EnumeratorBase(function(){n=new r(null,null,i._first)},function(t){return(n=n.next)?t.yieldReturn(n.value):t.yieldBreak()})},Object.defineProperty(o.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isReadOnly",{get:function(){return!1},enumerable:!0,configurable:!0}),o.prototype.add=function(n){this._addLast(n)},o.prototype.clear=function(){var n=this,t;return n._first=null,n._last=null,t=n._count,n._count=0,t},o.prototype.contains=function(t){var i=!1,r=n.areEqual;return this.forEach(function(n){return!(i=r(t,n))}),i},o.prototype.copyTo=function(n,t){typeof t=="undefined"&&(t=0);this.forEach(function(i,r){n[t+r]=i})},o.prototype.removeOnce=function(n){var u=this,f=u._findFirst(n),t,r;return f&&(t=f.prev,r=f.next,t?t.next=r:u._first=r,r?r.prev=t:u._last=t,u._count-=i),f!=null},o.prototype.remove=function(n){for(var i=this,t=e;i.removeOnce(n);)++t;return t},o.prototype.toArray=function(){var n=t.ArrayUtility.initialize(this._count);return this.copyTo(n),n},Object.defineProperty(o.prototype,"first",{get:function(){return u(this._first,this)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"last",{get:function(){return u(this._last,this)},enumerable:!0,configurable:!0}),o.prototype._get=function(n){if(n<0)throw new Error("ArgumentOutOfRangeException: index is less than zero.");if(n>=this._count)throw new Error("ArgumentOutOfRangeException: index is greater than count.");for(var t=this._first,i=e;t&&n<i++;)t=t.next;return t},o.prototype.get=function(n){return this._get(n).value},o.prototype.getNode=function(n){return u(this._get(n),this)},o.prototype.find=function(n){return u(this._findFirst(n),this)},o.prototype.findLast=function(n){return u(this._findLast(n),this)},o.prototype.addFirst=function(n){this._addFirst(n)},o.prototype.addLast=function(n){this._addLast(n)},o.prototype.removeFirst=function(){var t=this,r=t._first,n;r&&(n=r.next,t._first=n,n&&(n.prev=null),t._count-=i)},o.prototype.removeLast=function(){var t=this,r=t._last,n;r&&(n=r.prev,t._last=n,n&&(n.next=null),t._count-=i)},o.prototype.removeNode=function(t){var i=this,u=f(t,i),e=u.prev,o=u.next,r=!1,s=!1;if(e?e.next=o:i._first==u?i._first=o:r=!0,o?o.prev=e:i._last==u?i._last=e:s=!0,r!==s)throw new Error(n.Text.format("Exception: provided node is has no {0} reference but is not the {1} node!",r?"previous":"next",r?"first":"last"));return!r&&!s},o.prototype.addBefore=function(n,t){this._addNodeBefore(f(n,this),new r(t))},o.prototype.addAfter=function(n,t){this._addNodeAfter(f(n,this),new r(t))},o.prototype.addNodeBefore=function(n,t){this._addNodeBefore(f(n,this),f(t,this))},o.prototype.addNodeAfter=function(n,t){this._addNodeAfter(f(n,this),f(t,this))},o}(),o;t.LinkedList=s;o=function(){function n(n,t){this._list=n;this._node=t}return Object.defineProperty(n.prototype,"list",{get:function(){return this._list},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"previous",{get:function(){return u(this._node.prev,this._list)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"next",{get:function(){return u(this._node.next,this._list)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._node.value},set:function(n){this._node.value=n},enumerable:!0,configurable:!0}),n.prototype.addBefore=function(n){this._list.addBefore(this,n)},n.prototype.addAfter=function(n){this._list.addAfter(this,n)},n.prototype.addNodeBefore=function(n){this._list.addNodeBefore(this,n)},n.prototype.addNodeAfter=function(n){this._list.addNodeAfter(this,n)},n}()})(n.Collections||(n.Collections={}));var t=n.Collections}(System||(System={})),function(n){"use strict";function s(n,t){return Math.abs(n)!==1&&(t+="s"),t}function c(n){if(isNaN(n)||n>5||n<0||Math.floor(n)!==n)throw new Error("Invalid TimeUnit.");return!0}function l(n){if(!(n instanceof f||n instanceof i))throw new Error("Invalid comparison type.  Must be of type TimeUnitValue or TimeSpan.");}function a(n){if(n instanceof f){var t=n;return t.type===1?t.value:t.toTimeSpan().milliseconds}return n instanceof i?n._milliseconds:undefined}var e=1e4,t=1e3,r=60,u=60,o=24,y,h,f,v,i;(function(n){n[n.Ticks=0]="Ticks";n[n.Milliseconds=1]="Milliseconds";n[n.Seconds=2]="Seconds";n[n.Minutes=3]="Minutes";n[n.Hours=4]="Hours";n[n.Days=5]="Days"})(n.TimeUnit||(n.TimeUnit={}));y=n.TimeUnit;h=function(){function f(){for(var n=[],t=0;t<arguments.length-0;t++)n[t]=arguments[t+0];this._totalMilliseconds=n.length>1?i.millisecondsFromTime(n[0]||0,n[1]||0,n.length>2&&n[2]||0,n.length>3&&n[3]||0):n.length>0&&n[0]||0}return Object.defineProperty(f.prototype,"totalMilliseconds",{get:function(){return this._totalMilliseconds},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"direction",{get:function(){return n.compare(this._totalMilliseconds,0)},enumerable:!0,configurable:!0}),f.prototype.equals=function(t){return n.areEqual(this._totalMilliseconds,t.totalMilliseconds)},f.prototype.compareTo=function(t){return t==null?1:n.compare(this._totalMilliseconds,t.totalMilliseconds)},Object.defineProperty(f.prototype,"ticks",{get:function(){var n=this,t=n._ticks,i;return t===undefined&&(i=Math.abs(n._totalMilliseconds),n._ticks=t=(i-Math.floor(i))*e),t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"milliseconds",{get:function(){var i=this,n=i._ms;return n===undefined&&(i._ms=n=this._totalMilliseconds%t|0),n},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"seconds",{get:function(){var i=this,n=i._seconds;return n===undefined&&(i._seconds=n=this._totalMilliseconds/t%r|0),n},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"minutes",{get:function(){var i=this,n=i._minutes;return n===undefined&&(i._minutes=n=this._totalMilliseconds/t/r%u|0),n},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"hours",{get:function(){var i=this,n=i._hours;return n===undefined&&(i._hours=n=this._totalMilliseconds/t/r/u%o|0),n},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"days",{get:function(){var i=this,n=i._days;return n===undefined&&(i._days=n=this._totalMilliseconds/t/r/u/o|0),n},enumerable:!0,configurable:!0}),f.prototype.toTimeSpan=function(){return new i(this._totalMilliseconds)},f.from=function(n,t,i,r){return typeof i=="undefined"&&(i=0),typeof r=="undefined"&&(r=0),new f(n,t,i,r)},f.prototype.toString=function(){var n=this,t=[];return n.days&&t.push(s(n.days,"day")),n.hours&&t.push(s(n.hours,"hour")),n.minutes&&t.push(s(n.minutes,"minute")),n.seconds&&t.push(s(n.seconds,"second")),t.length>1&&t.splice(t.length-1,0,"and"),t.join(", ").replace(", and, "," and ")},f}();n.ClockTime=h;f=function(){function t(n,t){this.value=n;this._type=t;c(t)}return t.prototype.coerce=function(n){var r=this._type;if(c(r),n instanceof i)n=n.toTimeUnitValue(r);else if(n instanceof t)r!==n.type&&(n=n.to(r));else return null;return n},t.prototype.equals=function(t){var i=this.coerce(t);return i==null?!1:n.areEqual(this.value,i.value)},t.prototype.compareTo=function(t){return t==null?1:(l(t),n.compare(this.value,this.coerce(t).value))},Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),t.prototype.toTimeSpan=function(){return new i(this.value,this.type)},t.prototype.to=function(n){return typeof n=="undefined"&&(n=this.type),this.toTimeSpan().toTimeUnitValue(n)},t}();n.TimeUnitValue=f;i=function(){function i(n,t){typeof t=="undefined"&&(t=1);this._milliseconds=i.convertToMilliseconds(n,t)}return i.prototype.equals=function(t){var i=a(t);return t===undefined?!1:n.areEqual(this._milliseconds,i)},i.prototype.compareTo=function(t){return t==null?1:(l(t),n.compare(this._milliseconds,a(t)))},i.prototype.toTimeUnitValue=function(n){return typeof n=="undefined"&&(n=1),new f(this.total(n),n)},i.convertToMilliseconds=function(n,i){typeof i=="undefined"&&(i=1);switch(i){case 5:n*=o;case 4:n*=u;case 3:n*=r;case 2:n*=t;case 1:return n;case 0:return n/e;default:throw new Error("Invalid TimeUnit.");}},i.prototype.total=function(n){var t=this;switch(n){case 5:return t.days;case 4:return t.hours;case 3:return t.minutes;case 2:return t.seconds;case 1:return t._milliseconds;case 0:return t._milliseconds*e;default:throw new Error("Invalid TimeUnit.");}},Object.defineProperty(i.prototype,"ticks",{get:function(){return this._milliseconds*e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"milliseconds",{get:function(){return this._milliseconds},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"seconds",{get:function(){return this._milliseconds/t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minutes",{get:function(){return this.seconds/r},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hours",{get:function(){return this.minutes/u},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"days",{get:function(){return this.hours/o},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"time",{get:function(){return new h(this._milliseconds)},enumerable:!0,configurable:!0}),i.prototype.add=function(t){if(n.Types.isNumber(t))throw new Error("Use .addUnit to add a numerical value amount.  .add only supports ClockTime, TimeSpan, and TimeUnitValue.");return(t instanceof f||t instanceof h)&&(t=t.toTimeSpan()),new i(this._milliseconds+t.milliseconds)},i.prototype.addUnit=function(n,t){return typeof t=="undefined"&&(t=1),new i(this._milliseconds+i.convertToMilliseconds(n,t))},i.from=function(n,t){return new i(n,t)},i.fromDays=function(n){return new i(n,5)},i.fromHours=function(n){return new i(n,4)},i.fromMinutes=function(n){return new i(n,3)},i.fromSeconds=function(n){return new i(n,2)},i.fromMilliseconds=function(n){return new i(n,1)},i.fromTicks=function(n){return new i(n,0)},i.fromTime=function(n,t,r,u){return typeof r=="undefined"&&(r=0),typeof u=="undefined"&&(u=0),new i(i.millisecondsFromTime(n,t,r,u))},i.millisecondsFromTime=function(n,i,f,e){typeof f=="undefined"&&(f=0);typeof e=="undefined"&&(e=0);var o=n;return o*=u,o+=i,o*=r,o+=f,o*=t,o+e},i.between=function(n,t){return new i(t.getTime()-n.getTime())},Object.defineProperty(i,"zero",{get:function(){return v||(v=new i(0))},enumerable:!0,configurable:!0}),i}();n.TimeSpan=i}(System||(System={})),function(n){(function(t){var i=function(){function t(){this.reset()}return t.getTimestampMilliseconds=function(){return(new Date).getTime()},Object.defineProperty(t.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!0,configurable:!0}),t.startNew=function(){var n=new t;return n.start(),n},t.measure=function(i){var r=t.getTimestampMilliseconds();return i(),new n.TimeSpan(t.getTimestampMilliseconds()-r)},t.prototype.record=function(n){var i=t.measure(n);return this._elapsed+=i.milliseconds,i},t.prototype.start=function(){var n=this;n._isRunning||(n._startTimeStamp=t.getTimestampMilliseconds(),n._isRunning=!0)},t.prototype.stop=function(){var n=this;n._isRunning&&(n._elapsed+=n.currentLapMilliseconds,n._isRunning=!1)},t.prototype.reset=function(){var n=this;n._elapsed=0;n._isRunning=!1;n._startTimeStamp=NaN},t.prototype.lap=function(){var i=this;if(i._isRunning){var r=t.getTimestampMilliseconds(),f=i._startTimeStamp,u=r-f;return i._startTimeStamp=r,i._elapsed+=u,new n.TimeSpan(u)}return n.TimeSpan.zero},Object.defineProperty(t.prototype,"currentLapMilliseconds",{get:function(){return this._isRunning?t.getTimestampMilliseconds()-this._startTimeStamp:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLap",{get:function(){return this._isRunning?new n.TimeSpan(this.currentLapMilliseconds):n.TimeSpan.zero},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elapsedMilliseconds",{get:function(){var n=this,t=n._elapsed;return n._isRunning&&(t+=n.currentLapMilliseconds),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elapsed",{get:function(){return new n.TimeSpan(this.elapsedMilliseconds)},enumerable:!0,configurable:!0}),t}();t.Stopwatch=i})(n.Diagnostics||(n.Diagnostics={}));var t=n.Diagnostics}(System||(System={})),function(n){function i(){for(var i=[],n=0;n<arguments.length-0;n++)i[n]=arguments[n+0];t(i,!1)}function r(){for(var i=[],n=0;n<arguments.length-0;n++)i[n]=arguments[n+0];t(i,!0)}function u(t,i){if(t&&typeof t.dispose==n.Types.Function)if(i)try{t.dispose()}catch(r){}else t.dispose()}function t(n,i){for(var r;n.length&&!(r=n.shift()););if(r)try{u(r,i)}finally{t(n,i)}}function f(n,i){n&&n.length&&t(n.slice(),i)}function e(n,t){try{return t(n)}finally{i(n)}}n.dispose=i;n.disposeWithoutException=r;n.disposeThese=f;n.using=e;var o=function(){function n(n){this._finalizer=n;this._wasDisposed=!1}return Object.defineProperty(n.prototype,"wasDisposed",{get:function(){return this._wasDisposed},enumerable:!0,configurable:!0}),n.assertIsNotDisposed=function(n,t){if(typeof t=="undefined"&&(t="ObjectDisposedException"),n)throw new Error(t);return!0},n.prototype.assertIsNotDisposed=function(t){return typeof t=="undefined"&&(t="ObjectDisposedException"),n.assertIsNotDisposed(this._wasDisposed,t)},n.prototype.dispose=function(){var n=this;if(!n._wasDisposed){n._wasDisposed=!0;try{n._onDispose()}finally{n._finalizer&&n._finalizer()}}},n.prototype._onDispose=function(){},n}();n.DisposableBase=o}(System||(System={})),function(n){var t=function(n){function t(t){n.call(this);this._closure=t}return __extends(t,n),Object.defineProperty(t.prototype,"isValueCreated",{get:function(){return this._isValueCreated},enumerable:!0,configurable:!0}),t.prototype.reset=function(){var n=this;if(!n._closure)throw new Error("Cannot reset.  This Lazy has de-referenced its closure.");n._isValueCreated=!1;n._value=null},Object.defineProperty(t.prototype,"value",{get:function(){var n=this,t;return!n._isValueCreated&&n._closure?(t=n._closure(),n._value=t,n._isValueCreated=!0,t):n._value},enumerable:!0,configurable:!0}),t.prototype.valueOnce=function(){try{return this.value}finally{this._closure=null}},t.prototype._onDispose=function(){this._closure=null;this._value=null},t}(n.DisposableBase);n.Lazy=t}(System||(System={})),function(n){var t=n.Collections.ArrayUtility,i=function(n){function t(t,i,r,u){typeof r=="undefined"&&(r=!1);typeof u=="undefined"&&(u=0);n.call(this);this.type=t;this.listener=i;this.useCapture=r;this.priority=u}return __extends(t,n),t.prototype.dispose=function(){this.listener=null},Object.defineProperty(t.prototype,"wasDisposed",{get:function(){return this.listener==null},enumerable:!0,configurable:!0}),t.prototype.matches=function(n,t,i){typeof i=="undefined"&&(i=!1);var r=this;return r.type==n&&r.listener==t&&r.useCapture==i},t.prototype.equals=function(n){var t=this;return t.type==n.type&&t.listener==n.listener&&t.useCapture==n.useCapture&&t.priority==n.priority},t}(n.DisposableBase),r=function(r){function u(){r.apply(this,arguments);this._isDisposing=!1}return __extends(u,r),u.prototype.addEventListener=function(n,t,r,u){typeof r=="undefined"&&(r=!1);typeof u=="undefined"&&(u=0);var f=this._listeners;f||(this._listeners=f=[]);f.push(new i(n,t,r,u))},u.prototype.registerEventListener=function(n,t,i,r){typeof i=="undefined"&&(i=!1);typeof r=="undefined"&&(r=0);this.hasEventListener(n,t,i)||this.addEventListener(n,t,i,r)},u.prototype.hasEventListener=function(n,t,i){typeof i=="undefined"&&(i=!1);var r=this._listeners;return r&&r.some(function(r){return n==r.type&&(!t||t==r.listener&&i==r.useCapture)})},u.prototype.removeEventListener=function(n,i,r){var u,f,e;typeof r=="undefined"&&(r=!1);u=this._listeners;u&&(f=t.findIndex(u,function(t){return t.matches(n,i,r)}),f!=-1&&(e=u[f],u.splice(f,1),e.dispose()))},u.prototype.dispatchEvent=function(t,i){var s=this,e=this,f=e._listeners,r,o,u;return!f||!f.length?!1:(typeof t=="string"?(r=new Event,i||(i={}),r.cancelable=!!i.cancelable,r.target=e,r.type=t):r=t,o=r.type,u=[],f.forEach(function(n){n.type==o&&u.push(n)}),!u.length)?!1:(u.sort(function(n,t){return t.priority-n.priority}),u.forEach(function(t){var i=new Event;n.copyTo(r,i);i.target=s;t.listener(i)}),!0)},Object.defineProperty(u,"DISPOSING",{get:function(){return"disposing"},enumerable:!0,configurable:!0}),Object.defineProperty(u,"DISPOSED",{get:function(){return"disposed"},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isDisposing",{get:function(){return this._isDisposing},enumerable:!0,configurable:!0}),u.prototype.dispose=function(){var n=this,t;n.wasDisposed||n._isDisposing||(n._isDisposing=!0,n.dispatchEvent(u.DISPOSING),r.prototype.dispose.call(this),n.dispatchEvent(u.DISPOSED),t=n._listeners,t&&(this._listeners=null,t.forEach(function(n){return n.dispose()})))},u}(n.DisposableBase);n.EventDispatcher=r}(System||(System={})),function(n){(function(t){(function(i){function r(i,r){i&&n.using(i.getEnumerator(),function(n){t.Enumerator.forEach(n,r)})}i.forEach=r})(t.Enumerable||(t.Enumerable={}));var i=t.Enumerable})(n.Collections||(n.Collections={}));var t=n.Collections}(System||(System={})),function(n){(function(t){function i(n,t){typeof t=="undefined"&&(t="");console.log("DictionaryAbstractBase sub-class has not overridden "+n+". "+t);throw new Error("DictionaryAbstractBase."+n+": Not implemented.");}var r=function(){function r(){this._updateRecursion=0}return Object.defineProperty(r.prototype,"isUpdating",{get:function(){return this._updateRecursion!=0},enumerable:!0,configurable:!0}),r.prototype._onValueUpdate=function(t,i,r){if(!n.areEqual(i,r,!0)){var u=this;if(u.onValueChanged)u.onValueChanged(t,i,r);u._updateRecursion==0&&u._onUpdated()}},r.prototype._onUpdated=function(){var n=this;n.onUpdated&&n.onUpdated()},r.prototype.handleUpdate=function(n){var t=this,i;if(n){t._updateRecursion++;try{i=n()}finally{t._updateRecursion--}}else i=t._updateRecursion==0;return i&&t._updateRecursion==0&&t._onUpdated(),i},Object.defineProperty(r.prototype,"isReadOnly",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"count",{get:function(){return i("count")},enumerable:!0,configurable:!0}),r.prototype.add=function(n){this.addByKeyValue(n.key,n.value)},r.prototype.clear=function(){var n=this,i=n.keys,t=i.length;return t&&n.handleUpdate(function(){return i.forEach(function(t){return n.removeByKey(t)}),!0}),t!=n.count&&console.warn("Dictioary clear() results in mismatched count."),t},r.prototype.contains=function(t){var i=this.get(t.key);return n.areEqual(i,t.value)},r.prototype.copyTo=function(n,t){typeof t=="undefined"&&(t=0);for(var i=this.getEnumerator();i.moveNext();)n[t++]=i.current},r.prototype.remove=function(t){var i=t.key,r=this.get(i);return n.areEqual(r,t.value)&&this.removeByKey(i)?1:0},Object.defineProperty(r.prototype,"keys",{get:function(){return i("keys")},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"values",{get:function(){return i("values")},enumerable:!0,configurable:!0}),r.prototype.addByKeyValue=function(n,t){var i=this;if(i.containsKey(n))throw new Error("Adding key/value when one already exists.");i.set(n,t)},r.prototype.get=function(n){return i("get(key: TKey): TValue","When calling for key: "+n)},r.prototype.set=function(n,t){return i("set(key: TKey, value: TValue): boolean","When setting "+n+":"+t+".")},r.prototype.containsKey=function(n){var t=this.get(n);return t!==undefined},r.prototype.containsValue=function(t){for(var i=this.getEnumerator(),r=n.areEqual;i.moveNext();)if(r(i.current,t,!0))return i.dispose(),!0;return!1},r.prototype.removeByKey=function(n){return this.set(n,undefined)},r.prototype.removeByValue=function(t){var i=this,r=0,u=n.areEqual;return i.keys.forEach(function(n){u(i.get(n),t,!0)&&(i.removeByKey(n),++r)}),r},r.prototype.importPairs=function(n){var t=this;return t.handleUpdate(function(){var i=!1;return n.forEach(function(n){t.set(n.key,n.value);i=!0}),i})},r.prototype.getEnumerator=function(){var i=this,n,r,u=0;return new t.EnumeratorBase(function(){n=i.keys;r=n.length},function(t){while(u<r){var f=n[u++],e=i.get(f);if(e!==undefined)return t.yieldReturn({key:f,value:e})}return t.yieldBreak()})},r}();t.DictionaryAbstractBase=r})(n.Collections||(n.Collections={}));var t=n.Collections}(System||(System={})),function(n){(function(t){function r(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function u(t){return t===null?"null":t===undefined?"undefined":typeof t.toString===n.Types.Function?t.toString():Object.prototype.toString.call(t)}var i=function(){function n(n,t,i,r){this.key=n;this.value=t;this.prev=i;this.next=r}return n}(),f=function(){function n(n,t){this.first=n;this.last=t}return n.prototype.addLast=function(n){var t=this;t.last!=null?(t.last.next=n,n.prev=t.last,t.last=n):t.first=t.last=n},n.prototype.replace=function(n,t){var i=this;n.prev!=null?(n.prev.next=t,t.prev=n.prev):i.first=t;n.next!=null?(n.next.prev=t,t.next=n.next):i.last=t},n.prototype.remove=function(n){var t=this;n.prev!=null?n.prev.next=n.next:t.first=n.next;n.next!=null?n.next.prev=n.prev:t.last=n.prev},n.prototype.clear=function(){for(var n=this;n.last;)n.remove(n.last)},n.prototype.forEach=function(n){for(var i=this,t=i.first;t;)n(t),t=t.next},n}(),e=function(e){function o(t){typeof t=="undefined"&&(t=n.Functions.Identity);e.call(this);this.compareSelector=t;this._count=0;this._entries=new f;this._buckets={}}return __extends(o,e),o.prototype.setKV=function(t,f,e){var o=this,a=o._buckets,y=o._entries,w=o.compareSelector,b=w(t),v=u(b),s,k,h,c,l,p;if(r(a,v)){for(k=n.areEqual,h=a[v],c=0;c<h.length;c++)if(l=h[c],w(l.key)===b){if(!e)throw new Error("Key already exists.");return p=!k(l.value,f),p&&(f===undefined?(y.remove(l),h.splice(c,1),h.length||delete a[v],--o._count):(s=new i(t,f),y.replace(l,s),h[c]=s),o._onValueUpdate(t,f,l.value)),p}h.push(s=s||new i(t,f))}else{if(f===undefined){if(e)return!1;throw new Error("Cannot add 'undefined' value.");}a[v]=[s=new i(t,f)]}return++o._count,y.addLast(s),o._onValueUpdate(t,f,undefined),!0},o.prototype.addByKeyValue=function(n,t){this.setKV(n,t,!1)},o.prototype.get=function(n){var e=this._buckets,o=this.compareSelector,s=o(n),h=u(s),i,t,c,f;if(!r(e,h))return undefined;for(i=e[h],t=0,c=i.length;t<c;t++)if(f=i[t],o(f.key)===s)return f.value;return undefined},o.prototype.set=function(n,t){return this.setKV(n,t,!0)},o.prototype.containsKey=function(n){var f=this,e=f._buckets,o=f.compareSelector,s=o(n),h=u(s),i,t,c;if(!r(e,h))return!1;for(i=e[h],t=0,c=i.length;t<c;t++)if(o(i[t].key)===s)return!0;return!1},o.prototype.clear=function(){var n=this,t=n._buckets,r=e.prototype.clear.call(this),i;n._count=0;for(i in t)t.hasOwnProperty(i)&&delete t[i];return n._entries.clear(),r},Object.defineProperty(o.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),o.prototype.getEnumerator=function(){var i=this,n;return new t.EnumeratorBase(function(){n=i._entries.first},function(t){if(n!=null){var i={key:n.key,value:n.value};return n=n.next,t.yieldReturn(i)}return t.yieldBreak()})},Object.defineProperty(o.prototype,"keys",{get:function(){var t=this,n=[];return t._entries.forEach(function(t){return n.push(t.key)}),n},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"values",{get:function(){var t=this,n=[];return t._entries.forEach(function(t){return n.push(t.value)}),n},enumerable:!0,configurable:!0}),o}(t.DictionaryAbstractBase);t.Dictionary=e})(n.Collections||(n.Collections={}));var t=n.Collections}(System||(System={})),function(n){(function(t){var i=function(t){function i(){t.apply(this,arguments);this._count=0;this._map={}}return __extends(i,t),i.prototype.containsKey=function(n){return n in this._map},i.prototype.containsValue=function(t){var i=this._map,u=n.areEqual;for(var r in i)if(i.hasOwnProperty(r)&&u(i[r],t))return!0;return!1},i.prototype.get=function(n){return this._map[n]},i.prototype.set=function(n,t){var r=this,i=r._map,u=i[n];return u!==t?(t===undefined?n in i&&(delete i[n],--r._count):(n in i||++r._count,i[n]=t),r._onValueUpdate(n,t,u),!0):!1},i.prototype.importMap=function(n){var t=this;return t.handleUpdate(function(){var r=!1;for(var i in n)n.hasOwnProperty(i)&&t.set(i,n[i])&&(r=!0);return r})},i.prototype.toMap=function(n){var r=this,u={},t,i;for(t in r._map)r._map.hasOwnProperty(t)&&(i=r._map[t],n&&(i=n(t,i)),i!==undefined&&(u[t]=i));return u},Object.defineProperty(i.prototype,"keys",{get:function(){var n=this,t=[];for(var i in n._map)n._map.hasOwnProperty(i)&&t.push(i);return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"values",{get:function(){var n=this,t=[];for(var i in n._map)n._map.hasOwnProperty(i)&&t.push(n._map[i]);return t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),i}(t.DictionaryAbstractBase);t.StringKeyDictionary=i})(n.Collections||(n.Collections={}));var t=n.Collections}(System||(System={})),function(n){(function(n){var t=function(t){function i(){t.call(this);this._order=[]}return __extends(i,t),i.prototype.indexOfKey=function(n){return this._order.indexOf(n,0)},i.prototype.getValueByIndex=function(n){return this.get(this._order[n])},i.prototype.set=function(i,r,u){var f=this,e=f.indexOfKey(i)!=-1;return!e&&(r!==undefined||u)?f._order.push(i):e&&r===undefined&&!u&&n.ArrayUtility.remove(f._order,i),t.prototype.set.call(this,i,r)},i.prototype.setByIndex=function(n,t){var i=this,r=i._order;if(n<0||n>=r.length)throw new Error("IndexOutOfRange Exception.");return i.set(r[n],t)},i.prototype.importValues=function(n){var t=this;return t.handleUpdate(function(){for(var r=!1,i=0;i<n.length;i++)t.setByIndex(i,n[i])&&(r=!0);return r})},i.prototype.setValues=function(){for(var t=[],n=0;n<arguments.length-0;n++)t[n]=arguments[n+0];return this.importValues(t)},i.prototype.removeByIndex=function(n){return this.setByIndex(n,undefined)},Object.defineProperty(i.prototype,"keys",{get:function(){var n=this;return n._order.filter(function(t){return n.containsKey(t)})},enumerable:!0,configurable:!0}),i}(n.StringKeyDictionary);n.OrderedStringKeyDictionary=t})(n.Collections||(n.Collections={}));var t=n.Collections}(System||(System={}));LinkedList=System.Collections.LinkedList,function(n){(function(t){var i=new n.Types,r=function(){function n(){for(var n,i=[],t=0;t<arguments.length-0;t++)i[t]=arguments[t+0];n=this;n._parts=new LinkedList;n._latest=null;n._partArray=null;n.appendThese(i)}return n.prototype.appendSingle=function(n){if(n!==null&&n!==undefined){var t=this;t._latest=null;t._partArray=null;switch(typeof n){case i.Object:case i.Function:n=n.toString()}t._parts.add(n)}},n.prototype.appendThese=function(n){var t=this;return n.forEach(function(n){return t.appendSingle(n)}),t},n.prototype.append=function(){for(var t=[],n=0;n<arguments.length-0;n++)t[n]=arguments[n+0];return this.appendThese(t),this},n.prototype.appendLine=function(){for(var t=[],n=0;n<arguments.length-0;n++)t[n]=arguments[n+0];return this.appendLines(t),this},n.prototype.appendLines=function(n){var t=this;return n.forEach(function(n){n!==null&&n!==undefined&&(t.appendSingle(n),t._parts.add("\r\n"))}),t},Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this._parts.count===0},enumerable:!0,configurable:!0}),n.prototype._getCachedArray=function(){var n=this._partArray;return n||(this._partArray=n=this._parts.toArray()),n},n.prototype.toString=function(){var n=this._latest;return!1&&(this._latest=n=this._getCachedArray().join()),n},n.prototype.join=function(n){return this._getCachedArray().join(n)},n.prototype.clear=function(){this._parts.clear();this._latest=null},n.prototype.dispose=function(){this.clear()},n}();t.StringBuilder=r})(n.Text||(n.Text={}));var t=n.Text}(System||(System={}));
/*
//# sourceMappingURL=System.min.js.map
*/