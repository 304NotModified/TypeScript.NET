/*
 * @author electricessence / https://github.com/electricessence/
 * Licensing: MIT https://github.com/electricessence/TypeScript.NET/blob/master/LICENSE.md
 * Based on: https://en.wikipedia.org/wiki/Uniform_Resource_Identifier
 */
define(["require","exports","../Types","./Scheme","../Exceptions/ArgumentException","../Exceptions/ArgumentOutOfRangeException","./QueryParams"],function(t,e,r,n,o,u,i){function s(t){var e=t;if(r.isString(e)){if(!e)return void 0;if(e=n[e.toLowerCase().replace(/^\s+|[^a-z.]+$/g,"")],isNaN(e))throw new u("scheme",t,"Invalid scheme.")}if(r.isNumber(e,!1)){if(e=n[e],!e)throw new u("scheme",t,"Invalid scheme.");return e}return void 0}function h(t){if(!t.host){if(t.userInfo)throw new o("host","Cannot include user info when there is no host.");if(!isNaN(t.port))throw new o("host","Cannot include a port when there is no host.")}var e=t.host||"";return e&&(t.userInfo&&(e=t.userInfo+"@"+e),isNaN(t.port)||(e+=":"+t.port),e="//"+e),e}function f(t){return t&&(-1==t.indexOf(y)?y:"")+t}function a(t){return t&&(-1==t.indexOf(d)?d:"")+t}function c(t){var e=t.path,r=t.query;return""+(e&&(-1==e.indexOf(g)?g:"")+e||"")+(f(r)||"")}function p(t){var e=s(t.scheme),r=h(t),n=c(t),o=a(t.fragment);return""+(e&&e+":"||"")+(r||"")+(n||"")+(o||"")}var m=function(){function t(t,e,r,n,o,u,h){var c=this;c.scheme=s(t),c.userInfo=e,c.host=r,c.port=n,c.path=o,c.query=f(u),c.fragment=a(h),c.absoluteUri=c.getAbsoluteUri(),c.authority=c.getAuthority(),c.pathAndQuery=c.getPathAndQuery(),Object.freeze(c.queryParams=u?i.parseToMap(u):{}),Object.freeze(c)}return t.from=function(e){return new t(e.scheme,e.userInfo,e.host,e.port,e.path,e.query,e.fragment)},t.prototype.getAbsoluteUri=function(){return p(this)},t.prototype.getAuthority=function(){return h(this)},t.prototype.getPathAndQuery=function(){return c(this)},Object.defineProperty(t.prototype,"pathSegments",{get:function(){return this.path.match(/^[\/]|[^\/]*[\/]|[^\/]+$/g)},enumerable:!0,configurable:!0}),t.prototype.toMap=function(){var t=this,e={};return t.scheme&&(e.scheme=t.scheme),t.userInfo&&(e.userInfo=t.userInfo),t.host&&(e.host=t.host),t.port&&(e.port=t.port),t.path&&(e.path=t.path),t.query&&(e.query=t.query),t.fragment&&(e.fragment=t.fragment),e},t.prototype.toString=function(){return this.absoluteUri},t.toString=function(t){return p(t)},t.getAuthority=function(t){return h(t)},t}(),g="/",y="?",d="#";return m});
//# sourceMappingURL=Uri.js.map
